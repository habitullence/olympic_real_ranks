(function(a){function b(b,c){function q(){d.update();s();return d}function r(){j.obj.css(l,n/h.ratio);g.obj.css(l,-n);p["start"]=j.obj.offset()[l];var a=m.toLowerCase();h.obj.css(a,i[c.axis]);i.obj.css(a,i[c.axis]);j.obj.css(a,j[c.axis])}function s(){j.obj.bind("mousedown",t);j.obj[0].ontouchstart=function(a){a.preventDefault();j.obj.unbind("mousedown");t(a.touches[0]);return false};i.obj.bind("mouseup",w);if(c.scroll&&this.addEventListener){e[0].addEventListener("DOMMouseScroll",u,false);e[0].addEventListener("mousewheel",u,false)}else if(c.scroll){e[0].onmousewheel=u}}function t(b){p.start=k?b.pageX:b.pageY;var c=parseInt(j.obj.css(l));o.start=c=="auto"?0:c;a(document).bind("mousemove",w);document.ontouchmove=function(b){a(document).unbind("mousemove");w(b.touches[0])};a(document).bind("mouseup",v);j.obj.bind("mouseup",v);j.obj[0].ontouchend=document.ontouchend=function(b){a(document).unbind("mouseup");j.obj.unbind("mouseup");v(b.touches[0])};return false}function u(b){if(!(g.ratio>=1)){var b=b||window.event;var d=b.wheelDelta?b.wheelDelta/120:-b.detail/3;n-=d*c.wheel;n=Math.min(g[c.axis]-f[c.axis],Math.max(0,n));j.obj.css(l,n/h.ratio);g.obj.css(l,-n);if(c.lockscroll||n!==g[c.axis]-f[c.axis]&&n!==0){b=a.event.fix(b);b.preventDefault()}}}function v(b){a(document).unbind("mousemove",w);a(document).unbind("mouseup",v);j.obj.unbind("mouseup",v);document.ontouchmove=j.obj[0].ontouchend=document.ontouchend=null;return false}function w(a){if(!(g.ratio>=1)){o.now=Math.min(i[c.axis]-j[c.axis],Math.max(0,o.start+((k?a.pageX:a.pageY)-p.start)));n=o.now*h.ratio;g.obj.css(l,-n);j.obj.css(l,o.now)}return false}var d=this;var e=b;var f={obj:a(".viewport",b)};var g={obj:a(".overview",b)};var h={obj:a(".scrollbar",b)};var i={obj:a(".track",h.obj)};var j={obj:a(".thumb",h.obj)};var k=c.axis=="x",l=k?"left":"top",m=k?"Width":"Height";var n,o={start:0,now:0},p={};this.update=function(a){f[c.axis]=f.obj[0]["offset"+m];g[c.axis]=g.obj[0]["scroll"+m];g.ratio=f[c.axis]/g[c.axis];h.obj.toggleClass("disable",g.ratio>=1);i[c.axis]=c.size=="auto"?f[c.axis]:c.size;j[c.axis]=Math.min(i[c.axis],Math.max(0,c.sizethumb=="auto"?i[c.axis]*g.ratio:c.sizethumb));h.ratio=c.sizethumb=="auto"?g[c.axis]/i[c.axis]:(g[c.axis]-f[c.axis])/(i[c.axis]-j[c.axis]);n=a=="relative"&&g.ratio<=1?Math.min(g[c.axis]-f[c.axis],Math.max(0,n)):0;n=a=="bottom"&&g.ratio<=1?g[c.axis]-f[c.axis]:isNaN(parseInt(a))?n:parseInt(a);r()};return q()}a.tiny=a.tiny||{};a.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,lockscroll:true,size:"auto",sizethumb:"auto"}};a.fn.tinyscrollbar=function(c){var c=a.extend({},a.tiny.scrollbar.options,c);this.each(function(){a(this).data("tsb",new b(a(this),c))});return this};a.fn.tinyscrollbar_update=function(b){return a(this).data("tsb").update(b)};})(jQuery)window.$core=jQuery.extend({},window.$core,{superfish:function($) {$.fn.superfish=function(op) {var sf=$.fn.superfish,c=sf.c,$arrow=$(['<span class="',c.arrowClass,'">&#9660;</span>'].join('')),over=function() {var $$=$(this),menu=getMenu($$),o=sf.op;clearTimeout(menu.sfTimer);menu.sfTimer=setTimeout(function() {$$.showSuperfishUl().siblings().hideSuperfishUl();},o.overDelay);},out=function() {var $$=$(this),menu=getMenu($$),o=sf.op;clearTimeout(menu.sfTimer);menu.sfTimer=setTimeout(function() {o.retainPath=($.inArray($$[0],o.$path)>-1);$$.hideSuperfishUl();if(o.$path.length&&$$.parents(['li.',o.hoverClass].join('')).length<1) { over.call(o.$path);}},o.delay);},getMenu=function($menu) {var menu=$menu.parents(['ul.',c.menuClass,':first'].join(''))[0];sf.op=sf.o[menu.serial];return menu;},addArrow=function($a) { $a.addClass(c.anchorClass).append($arrow.clone());};return this.each(function() {var $ctx=$(this),s=this.serial=sf.o.length,o=$.extend({},sf.defaults,op);o.$path=$('li.' + o.pathClass,this).slice(0,o.pathLevels).each(function() {$(this).addClass([o.hoverClass,c.bcClass].join(' ')).filter('li:has(ul)').removeClass(o.pathClass);});sf.o[s]=sf.op=o;var _menus=$ctx.find('li:has(ul)');_menus[($.fn.hoverIntent&&!o.disableHI) ? 'hoverIntent':'hover'](over,out).each(function() {if(o.autoArrows) { addArrow($('>a:first-child',this));}}).not('.' + c.bcClass).hideSuperfishUl();_menus.find('a.sf-with-ul').focus(function() {over.call($(this).closest('li'));}).blur(function() {out.call($(this).closest('li'));});o.onInit.call(this);}).each(function() {var menuClasses=[c.menuClass];if(sf.op.dropShadows&&!($.browser.msie&&$.browser.version<7)) { menuClasses.push(c.shadowClass);}$(this).addClass(menuClasses.join(' '));});};var sf=$.fn.superfish;sf.o=[];sf.op={};sf.IE7fix=function() {var o=sf.op;if($.browser.msie&&$.browser.version>6&&o.dropShadows&&o.animation.opacity!=undefined) {this.toggleClass(sf.c.shadowClass + '-off');}};sf.c={bcClass:'sf-breadcrumb',menuClass:'sf-js-enabled',anchorClass:'sf-with-ul',arrowClass:'sf-sub-indicator',shadowClass:'sf-shadow'};sf.defaults={hoverClass:'sfHover',pathClass:'overideThisToUse',pathLevels:1,delay:300,overDelay:150,animation:{ opacity:'show'},speed:'normal',autoArrows:true,dropShadows:true,disableHI:true,onInit:function() {},onBeforeShow:function() {},onShow:function() {},onHide:function() {}};$.fn.extend({hideSuperfishUl:function() {var o=sf.op,not=(o.retainPath===true) ? o.$path:'';o.retainPath=false;var $ul=$(['li.',o.hoverClass].join(''),this).add(this).not(not).removeClass(o.hoverClass).find('>div.flyOut').addClass('hide');o.onHide.call($ul);return this;},showSuperfishUl:function() {var o=sf.op,sh=sf.c.shadowClass + '-off',$ul=this.addClass(o.hoverClass).find('>div.flyOut:hidden').removeClass('hide');sf.IE7fix.call($ul);o.onBeforeShow.call($ul);$ul.animate(o.animation,o.speed,function() { sf.IE7fix.call($ul); o.onShow.call($ul);});return this;}});}});(function($){$.extend({tablesorter:newfunction(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:true,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:'/\.|\,/g',onRenderHeader:null,selectorHeaders:'thead th',debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");}this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);}else{alert(s);}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";}if(table.tBodies.length==0)return;var rows=table.tBodies[0].rows;if(rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);}else if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);}if(!p){p=detectParserForColumn(table,rows,-1,i);}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";}list.push(p);}}if(table.config.debug){log(parsersDebug);}return list;};function detectParserForColumn(table,rows,rowIndex,cellIndex){var l=parsers.length,node=false,nodeValue=false,keepLooking=true;while(nodeValue==''&&keepLooking){rowIndex++;if(rows[rowIndex]){node=getNodeFromRowAndCellIndex(rows,rowIndex,cellIndex);nodeValue=trimAndGetNodeText(table.config,node);if(table.config.debug){log('Checking if value was empty on row:'+rowIndex);}}else{keepLooking=false;}}for(var i=1;i<l;i++){if(parsers[i].is(nodeValue,table,node)){return parsers[i];}}return parsers[0];}function getNodeFromRowAndCellIndex(rows,rowIndex,cellIndex){return rows[rowIndex].cells[cellIndex];}function trimAndGetNodeText(config,node){return $.trim(getElementText(config,node));}function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];}}return false;}function buildCache(table){if(table.config.debug){var cacheTime=new Date();}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=$(table.tBodies[0].rows[i]),cols=[];if(c.hasClass(table.config.cssChildRow)){cache.row[cache.row.length-1]=cache.row[cache.row.length-1].add(c);continue;}cache.row.push(c);for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c[0].cells[j]),table,c[0].cells[j]));}cols.push(cache.normalized.length);cache.normalized.push(cols);cols=null;};if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);}return cache;};function getElementText(config,node){var text="";if(!node)return"";if(!config.supportsTextContent)config.supportsTextContent=node.textContent||false;if(config.textExtraction=="simple"){if(config.supportsTextContent){text=node.textContent;}else{if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){text=node.childNodes[0].innerHTML;}else{text=node.innerHTML;}}}else{if(typeof(config.textExtraction)=="function"){text=config.textExtraction(node);}else{text=$(node).text();}}return text;}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){var pos=n[i][checkCell];rows.push(r[pos]);if(!table.config.appender){var l=r[pos].length;for(var j=0;j<l;j++){tableBody[0].appendChild(r[pos][j]);}}}if(table.config.appender){table.config.appender(table,rows);}rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime);}applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd");},0);};function buildHeaders(table){if(table.config.debug){var time=new Date();}var meta=($.metadata)?true:false;var header_index=computeTableHeaderCellIndexes(table);$tableHeaders=$(table.config.selectorHeaders,table).each(function(index){this.column=header_index[this.parentNode.rowIndex+"-"+this.cellIndex];this.order=formatSortingOrder(table.config.sortInitialOrder);this.count=this.order;if(checkHeaderMetadata(this)||checkHeaderOptions(table,index))this.sortDisabled=true;if(checkHeaderOptionsSortingLocked(table,index))this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(table,index);if(!this.sortDisabled){var $th=$(this).addClass(table.config.cssHeader);if(table.config.onRenderHeader)table.config.onRenderHeader.apply($th);}table.config.headerList[index]=this;});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders);}return $tableHeaders;};function computeTableHeaderCellIndexes(t){var matrix=[];var lookup={};var thead=t.getElementsByTagName('THEAD')[0];var trs=thead.getElementsByTagName('TR');for(var i=0;i<trs.length;i++){var cells=trs[i].cells;for(var j=0;j<cells.length;j++){var c=cells[j];var rowIndex=c.parentNode.rowIndex;var cellId=rowIndex+"-"+c.cellIndex;var rowSpan=c.rowSpan||1;var colSpan=c.colSpan||1var firstAvailCol;if(typeof(matrix[rowIndex])=="undefined"){matrix[rowIndex]=[];}for(var k=0;k<matrix[rowIndex].length+1;k++){if(typeof(matrix[rowIndex][k])=="undefined"){firstAvailCol=k;break;}}lookup[cellId]=firstAvailCol;for(var k=rowIndex;k<rowIndex+rowSpan;k++){if(typeof(matrix[k])=="undefined"){matrix[k]=[];}var matrixrow=matrix[k];for(var l=firstAvailCol;l<firstAvailCol+colSpan;l++){matrixrow[l]="x";}}}}return lookup;}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);}}}return arr;};function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;};return false;}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;};return false;}function checkHeaderOptionsSortingLocked(table,i){if((table.config.headers[i])&&(table.config.headers[i].lockedOrder))return table.config.headers[i].lockedOrder;return false;}function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table);}}function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];}}};function formatSortingOrder(v){if(typeof(v)!="Number"){return(v.toLowerCase()=="desc")?1:0;}else{return(v==1)?1:0;}}function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true;}}return false;}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]]);}}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$('<colgroup>');$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($('<col>').css('width',$(this).width()));});$(table).prepend(colgroup);};}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++;}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(table.config.parsers[c].type=="text")?((order==0)?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c)):((order==0)?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c));var e="e"+i;dynamicExp+="var "+e+" = "+s;dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { ";}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; ";}dynamicExp+="return 0; ";dynamicExp+="}; ";if(table.config.debug){benchmark("Evaling expression:"+dynamicExp,new Date());}eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);}return cache;};function makeSortFunction(type,direction,index){var a="a["+index+"]",b="b["+index+"]";if(type=='text'&&direction=='asc'){return"("+a+" == "+b+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+a+" < "+b+") ? -1 : 1 )));";}else if(type=='text'&&direction=='desc'){return"("+a+" == "+b+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+b+" < "+a+") ? -1 : 1 )));";}else if(type=='numeric'&&direction=='asc'){return"("+a+" === null && "+b+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+a+" - "+b+"));";}else if(type=='numeric'&&direction=='desc'){return"("+a+" === null && "+b+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+b+" - "+a+"));";}};function makeSortText(i){return"((a["+i+"] < b["+i+"]) ? -1 : ((a["+i+"] > b["+i+"]) ? 1 : 0));";};function makeSortTextDesc(i){return"((b["+i+"] < a["+i+"]) ? -1 : ((b["+i+"] > a["+i+"]) ? 1 : 0));";};function makeSortNumeric(i){return"a["+i+"]-b["+i+"];";};function makeSortNumericDesc(i){return"b["+i+"]-a["+i+"];";};function sortText(a,b){if(table.config.sortLocaleCompare)return a.localeCompare(b);return((a<b)?-1:((a>b)?1:0));};function sortTextDesc(a,b){if(table.config.sortLocaleCompare)return b.localeCompare(a);return((b<a)?-1:((b>a)?1:0));};function sortNumeric(a,b){return a-b;};function sortNumericDesc(a,b){return b-a;};function getCachedSortType(parsers,i){return parsers[i].type;};this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies)return;var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$.data(this,"tablesorter",config);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){$this.trigger("sortStart");var $cell=$(this);var i=this.column;this.order=this.count++%2;if(this.lockedOrder)this.order=this.lockedOrder;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j]);}}}config.sortList.push([i,this.order]);}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2;}}}else{config.sortList.push([i,this.order]);}};setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache));},1);return false;}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false;}});$this.bind("update",function(){var me=this;setTimeout(function(){me.config.parsers=buildParserCache(me,$headers);cache=buildCache(me);},1);}).bind("updateCell",function(e,cell){var config=this.config;var pos=[(cell.parentNode.rowIndex-1),cell.cellIndex];cache.normalized[pos[0]][pos[1]]=config.parsers[pos[1]].format(getElementText(config,cell),cell);}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache));}).bind("appendCache",function(){appendToTable(this,cache);}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);}).bind("applyWidgets",function(){applyWidget(this);});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);}applyWidget(this);});};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;}}if(a){parsers.push(parser);};};this.addWidget=function(widget){widgets.push(widget);};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i;};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i;};this.isDigit=function(s,config){return/^[-+]?\d*$/.test($.trim(s.replace(/[,.']/g,'')));};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild)this.removeChild(this.firstChild);}empty.apply(table.tBodies[0]);}else{table.tBodies[0].innerHTML="";}};}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true;},format:function(s){return $.trim(s.toLocaleLowerCase());},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c);},format:function(s){return $.tablesorter.formatFloat(s);},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[£$€?.]/.test(s);},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[£$€]/g),""));},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item;}else{r+=item;}}return $.tablesorter.formatFloat(r);},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s);},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),''));},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0");},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s));},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");}else if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");}else if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");}return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false;},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();}var $tr,row=-1,odd;$("tr:visible",table.tBodies[0]).each(function(i){$tr=$(this);if(!$tr.hasClass(table.config.cssChildRow))row++;odd=(row%2==0);$tr.removeClass(table.config.widgetZebra.css[odd?0:1]).addClass(table.config.widgetZebra.css[odd?1:0])});if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);}}});})(jQuery);window.$core=jQuery.extend({},window.$core,{stickyBar:function($) {$.fn.stickyBar=function(opts) {return $.fn.stickyBar.methods.init(this,$.extend({},$.fn.stickyBar.defaults,opts));};$.fn.stickyBar.defaults={toggleElement:'#sticky-switch',additionalElm:null,onBeforeToggleHandler:null,onToggle:null,onAfterToggle:null,panelElement:'#sticky-content',panelClosedClass:'closed',panelMinHeight:5,panelDefHeight:98,cookie:{ name:'sticky',status:['is-close','is-open'],expires:15},hiddenClass:'hide',reverseClass:'reverse',wrapTemplate:'<div class="sticky-wrap hide" id="__jQuery_stickybarWrap"></div>',focusedElement:'#sticky-sportsList>ul>li',focusedChildElement:'.tooltip',tooltip:{ url:'/externalmodules/{discipline}/sticky.html',paraUrl:'/externalmodules/para/{discipline}/sticky.html',loadingImg:'/imgml/stickybar/sticky-ico-loading.gif'},pollCfg:{ json:'/live/library/stickybar/status.txt',paraJson:'/live/library/stickybar/paralympics/status.txt',delay:15000},liveClass:'onNow',legendElement:'.wrapLiveResults',resBasePath:'/live/library/stickybar/',onInit:null,onFocusedMouseEnter:null,onFocusedMouseMove:null,onFocusedMouseLeave:null,onFocusedClick:null,onResourcesLoaded:null};$.fn.stickyBar.methods={opts:null,_ctx:null,jDataKey:'__stickybar_focusedelement_create',$wrap:null,$panel:null,$toggle:null,$toggleElement:null,$window:null,window:null,$sportsList:null,$legend:null,genericTs:null,init:function($this,opts) {var self=this,platform=(navigator.platform||'').toLowerCase(),userAgent=(navigator.userAgent||'').toLowerCase();self.opts=opts;self.genericTs=new Date().getTime();self._ctx=$this;if((platform==='ipad'||platform==='iphone'||platform==='ipod')&&userAgent.indexOf('os 5_0')===-1&&self._ctx.css('position')==='fixed') {self._ctx.css({ position:'absolute'});}self.$wrap=$(self.opts.wrapTemplate).appendTo(document.body);self.window=window;self.$window=$(self.window);self.$panel=$(self.opts.panelElement,self._ctx);self.isPara=self.$panel.attr('data-paralympics');if(self.$panel.hasClass('sticky-content-pre')) {self.$wrap.addClass('pre');}self.showPreGamesData();self.$toggleElement=$(self.opts.toggleElement,self._ctx).bind('click',function(e) {var $target=$(e.target);if(!$target.is('a')) {$target=null;return;}e.preventDefault();if(self.opts.onBeforeToggleHandler) {if(typeof (self.opts.onBeforeToggleHandler.toString())==='object') {self.opts.onBeforeToggleHandler.callback.call($target[0],self,e);if(self.opts.onBeforeToggleHandler.hasOwnProperty('chained')&&!self.opts.onBeforeToggleHandler.chained) {$target=null;return;}}else {self.opts.onBeforeToggleHandler.call($target[0],self,e);}}self.toggle.apply(self,[false]);$target=null;});self.toggle.apply(self,[true]);return $this;},toggle:function(isOnLoad) {var self=this,_opts=self.opts,_ctx=self._ctx,_cookie;if(!self.$toggle) {self.$toggle=self.$toggleElement.find('a');}if(window.localStorage) {_cookie=localStorage.getItem(_opts.cookie.name);}else { _cookie=_opts.cookie.status[0];}var panelCallback=function() {self.$panel.toggleClass(_opts.panelClosedClass,_cookie===_opts.cookie.status[0]);};if(!isOnLoad) {_cookie=_opts.cookie.status[_cookie===_opts.cookie.status[1] ? 0:1];var height=self.$panel.attr('def-height');var afterAnimation=false;if(_cookie===_opts.cookie.status[0]) {height=self.opts.panelMinHeight;afterAnimation=true;}if(!afterAnimation) { panelCallback.apply(self);}self.$panel.animate({ height:height},500,'linear',function() {if(afterAnimation) {panelCallback.apply(self);}});if(self.opts.onToggle) { self.opts.onToggle.apply(self,[_cookie]);}self.$toggle.toggleClass(self.opts.hiddenClass);}else {self.$panel[0].setAttribute('def-height',self.opts.panelDefHeight);if(!_cookie) { _cookie=_opts.cookie.status[0];}if(_cookie!==_opts.cookie.status[1]) {self.$panel.height(self.opts.panelMinHeight);setTimeout(function() {self.innerAfterToggle.apply(self,[true]);panelCallback.apply(self);},500);}else {self.$toggle.toggleClass(self.opts.hiddenClass);panelCallback.apply(self);self.$panel.animate({ height:self.opts.panelDefHeight},500,'linear');self.innerAfterToggle.apply(self);}}if(window.localStorage) {localStorage.setItem(_opts.cookie.name,_cookie,{ expires:_opts.cookie.expires,path:'/'});}if(self.opts.onAfterToggle) { self.opts.onAfterToggle.apply(self,[_cookie,isOnLoad]);}return self;},innerAfterToggle:function(closed) {var self=this,p;self.$sportsList=$(self.opts.focusedElement,self._ctx);self.$legend=$(self.opts.legendElement,self._ctx);self.$legend.nativeText=self.$legend.html();if(self.opts.additionalElm) {for (p in self.opts.additionalElm) {if(p) {self.opts.additionalElm[p]=$(self.opts.additionalElm[p]);}}}self.setFocused();if(self.opts.onInit) { self.opts.onInit.apply(self,[localStorage.getItem(self.opts.cookie.name)]);}self.loadResources.apply(self);if(!closed) {self._onPoll.apply(self,[self._ctx]);}else {self.$toggleElement.bind('mouseenter',function() {setTimeout(function() {self._onPoll.apply(self,[self._ctx]);self=null;},200);$(this).unbind('mouseenter');});}},resources_to_load:2,loadResources:function() {var self=this,$countryWrap=self._ctx.find('#sticky-countries-wrap'),$disciplineWrap=self._ctx.find('#sticky-sports-wrap');if(!$countryWrap.length) {self=null;$countryWrap=null;$disciplineWrap=null;return;}if($countryWrap.html().length>10) {self=null;$countryWrap=null;$disciplineWrap=null;return;}basePath=self.opts.resBasePath + (self.isPara ? 'paralympics/':'');self._loadInnerResources(basePath + '_countries.html',function(data) {$countryWrap.html(['<!--googleoff:all--><div><label for="c1filterCountry" class="hidden">Country</label><select id="c1filterCountry">',data,'</select></div><div><label for="c2filterCountry" class="hidden">Country</label><select id="c2filterCountry">',data,'</select></div><!--googleon:all-->'].join(''));});self._loadInnerResources(basePath + '_disciplines.html',function(data) {$disciplineWrap.html(['<!--googleoff:all--><div><label for="d1filterSport" class="hidden">Sport</label><select id="d1filterSport">',data,'</select></div><div><label for="d2filterSport" class="hidden">Sport</label><select id="d2filterSport">',data,'</select></div><!--googleon:all-->'].join(''));});},_loadInnerResources:function(url,callback) {var self=this;$.ajax({type:'get',url:url,success:function(data) {if(callback) { callback.apply(self,[data]);}self.resources_to_load--;if(self.resources_to_load<=0&&self.opts.onResourcesLoaded) {self.opts.onResourcesLoaded.apply(self);}self=null;}});},setFocused:function() {var self=this;if(!self.opts.onFocusedMouseEnter) { self.opts.onFocusedMouseEnter=self.onFocusedMouseEnter;}if(!self.opts.onFocusedMouseMove) { self.opts.onFocusedMouseMove=self.onFocusedMouseMove;}if(!self.opts.onFocusedMouseLeave) { self.opts.onFocusedMouseLeave=self.onFocusedMouseLeave;}if(!self.opts.onFocusedClick) { self.opts.onFocusedClick=self.onFocusedClick;}self.$legend.bind('mouseenter',function() {if(self.xhr) { self.xhr.abort();}self.__hideWrap();});self.$sportsList.unbind('mouseenter mouseleave blur mousemove click').bind('mouseenter mouseleave blur mousemove click',function(e) {var $this=$(this);switch (e.type) {case 'mouseenter':self.__onFocusedMouseEnter.apply($this,[e,self]);break;case 'mouseleave':case 'blur':self.opts.onFocusedMouseLeave.apply($this,[e,self]);self.__lastEvt=null;break;case 'mousemove':self.opts.onFocusedMouseMove.apply($this,[e,self]);break;case 'click':self.opts.onFocusedClick.apply($this,[e,self]);break;}});},__onFocusedMouseEnter:function(e,mThis) {var $this=this;var $child=$this.find(mThis.opts.focusedChildElement);if($child.length) {mThis.opts.onFocusedMouseEnter.apply($this,[e,$child,mThis]);}$this=null;$child=null;mThis=null;},__modifier:{ x:0,y:-6},__tm:null,xhr:null,onFocusedMouseEnter:function(e,$child,mThis) {var $this=$(this),$inner=$child.find('.tooltipInner');if($child.find('.finishedDisc').length) { $child.find('.tooltipContent').addClass('finishedDisc');}mThis.$wrap.html($child.html()).removeClass(mThis.opts.hiddenClass);var completeCallback=function(jqXHR,textStatus) {if(!jqXHR||jqXHR.status==0) {delete jqXHR;return;}var _$this=$(this),_$child=_$this.find(mThis.opts.focusedChildElement);if(textStatus=='error'||jqXHR.responseText.indexOf('urlmapper_Errors')!=-1) {_$child.find('.tooltipInner').html('Information not available');}mThis.$wrap.html(_$child.html());delete jqXHR;_url=null;_$child=null;};if(mThis.xhr) { mThis.xhr.abort();}if($inner.text()===''||$inner.text()===' ') {if(!$inner.find('#sticky-loading-image').length) {$inner.append('<div id="sticky-loading-image"><img style="display:block;width:32px;height:32px;margin:0 auto;padding:2px 0 4px;" src="' + mThis.opts.tooltip.loadingImg + '"/></div>');}var _url=(mThis.isPara ? (mThis.opts.tooltip.paraUrl||mThis.opts.tooltip.url):mThis.opts.tooltip.url).replace('{discipline}',$this.find('a:first').attr('class'));mThis.xhr=$.ajax({ type:'GET',url:_url + '?ign=' + mThis.genericTs,context:$this,success:function(data) {var __this=$(this);__this.find(mThis.opts.focusedChildElement).find('.tooltipInner').html(data);if(__this.find('.finishedDisc').length) { __this.find('.tooltipContent').addClass('finishedDisc');}__this=null;delete data;},complete:completeCallback});}else { completeCallback.apply(this);}mThis.__setCssMouseEvt(e,$this,mThis);_gaq.push(['_trackEvent','sticky bar','popup',$this.find('a:first').attr('class')]);},onFocusedMouseMove:function(e,mThis) {var r=mThis.__setCssMouseEvt(e,$(this),mThis);mThis=null;return r;},onFocusedMouseLeave:function(e,mThis) {mThis.__hideWrap();if(mThis.xhr) {mThis.xhr.abort();}mThis=null;},onFocusedClick:function(e,mThis) {},__setCssMouseEvt:function(e,$this,mThis) {var _bottom=(mThis.$window.height() - e.clientY) - mThis.__modifier.y,_left=e.clientX + mThis.__modifier.x;if(($this.offset().left + $this.width() + mThis.$wrap.width())>mThis.$window.width()) {_left -= mThis.$wrap.width();mThis.$wrap.addClass(mThis.opts.reverseClass);}else { mThis.$wrap.removeClass(mThis.opts.reverseClass);}mThis.$wrap.css({ bottom:_bottom,left:_left});return mThis.$wrap;},__hideWrap:function() {return this.$wrap.removeAttr('style').addClass(this.opts.hiddenClass);},poll:function($this,data) {var self=this,liveLegend=false;$.ajax({ dataType:'json',type:'GET',url:(self.isPara ? self.opts.pollCfg.paraJson||self.opts.pollCfg.json:self.opts.pollCfg.json) + '?ign=' + (new Date().getTime()),success:function(json) {var $json=$(json),p;if(!$json.length) {$json=null;delete json;return;}var _$json=$json[0];for (p in _$json) {if(p&&p.indexOf('debug_')===-1) {var v=_$json[p],isLive=v==='1',$li=self.$sportsList.find('.' + p.toLowerCase()).parents('li:first'),wasLive=$li.hasClass(self.opts.liveClass);if((wasLive&&!isLive)||!wasLive&&isLive) {$li.find('.tooltipInner').html('');self.genericTs=new Date().getTime();}$li[isLive ? 'addClass':'removeClass'](self.opts.liveClass);if(isLive) {liveLegend=true;}v=null;$li=null;}}if(self.$legend.length) {var _native=self.$legend.nativeText;if(!liveLegend) {self.$legend.find('a').html('Full schedule').parent().parent().addClass('off');}else {self.$legend.html(_native).parent().removeClass('off');}}self._onPoll.apply(self,[$this,true]);_$json=null;$json=null;self=null;delete json;}});},_onPoll:function($this,recursive) {var self=this;if(!recursive) {self.poll.apply(self,[$this]);self=null;return;}self.__tm=setTimeout(function() {self.poll.apply(self,[$this]);self=null;},self.opts.pollCfg.delay);},showPreGamesData:function() {var $stickypre=$('.sticky-content-pre');if($stickypre.length) {var now=new Date(),OlympicsStart=new Date('2012-07-25'),nowMonth=now.getMonth() + 1,nowDay=now.getDate(),month='';nowDay=(nowDay<10) ? '0' + nowDay:nowDay;$stickypre.find('.day').text(nowDay);switch (nowMonth) {case 1:month='January';break;case 2:month='February';break;case 3:month='March';break;case 4:month='April';break;case 5:month='May';break;case 6:month='June';break;case 7:month='July';break;case 8:month='August';break;}if(month.length) {$stickypre.find('.month').text(month);}var cdDays=$('.jcountdown-dd').text().replace(/^[0]+/g,"");$stickypre.find('.daysto25').text('0');}$stickypre=null;}};}});window.$core=jQuery.extend({},window.$core,{myolympics:function($) {$.fn.myolympics=function(options) {var $ctx=this,ispara=$ctx.attr('data-paralympics'),countryKey='mycountries' + (ispara ? '_para':''),discKey='mysports' + (ispara ? '_para':''),$cookieC=localStorage.getItem(countryKey),$cookieS=localStorage.getItem(discKey),hiddenClass='hide',showSelect=false,$stickyselect=$ctx.find('.stickyselect'),$myolympics=$('.myolympics'),$stickycountry1=$('#stickycountry1'),$stickycountry2=$('#stickycountry2'),$stickydisc1=$('#stickydisc1'),$stickydisc2=$('#stickydisc2'),$selDisc1=$("#d1filterSport"),$selDisc2=$("#d2filterSport"),$selCountry1=$('#c1filterCountry'),$selCountry2=$('#c2filterCountry');if(($cookieC!==null||$cookieS!==null)&&($cookieC!=='_'||$cookieS!='_')) {$stickyselect.addClass(hiddenClass);$myolympics.removeClass(hiddenClass);if($cookieC!==null) {var countries=$cookieC.split('_'),$country1=countries[0],$country2=countries[1],$opt_country1=$selCountry1.find('option[data-code="' + $country1 + '"]').attr('selected','selected'),$opt_country2=$selCountry2.find('option[data-code="' + $country2 + '"]').attr('selected','selected'),txt_country1=$opt_country1.text(),txt_country2=$opt_country2.text();if($country1) {$stickycountry1.html('<img src="/imgml/flags/s/' + $country1 + '.png" title="' + txt_country1 + '" alt="' + txt_country1 + '" width="23" height="15" />' + $country1.toUpperCase());}if($country2) {$stickycountry2.html('<img src="/imgml/flags/s/' + $country2 + '.png" title="' + txt_country2 + '" alt="' + txt_country2 + '" width="23" height="15" />' + $country2.toUpperCase());}}if($cookieS!==null) {var sports=$cookieS.split('_'),$sport1=sports[0],$sport2=sports[1],$optDisc1=$selDisc1.find('option[data-seo="' + $sport1 + '"]'),$optDisc2=$selDisc2.find('option[data-seo="' + $sport2 + '"]');if($sport1!=='') {$stickydisc1.text($optDisc1.text());if($stickydisc1.text().length>20) {$stickydisc1.css("letter-spacing","-1px");}$optDisc1.attr('selected','selected');}if($sport2!=='') {$stickydisc2.text($optDisc2.text());if($stickydisc2.text().length>20) {$stickydisc2.css("letter-spacing","-1px");}$optDisc2.attr('selected','selected');}}}$('#stickystart').click(function(e) {$stickyselect.addClass(hiddenClass);$('.choosecountries').removeClass(hiddenClass);_gaq.push(['_trackEvent','sticky bar','personalizeStart']);e.preventDefault();});$('#stickystep1').click(function(e) {$('.choosecountries').addClass(hiddenClass);$('.choosesports').removeClass(hiddenClass);var country1=$selCountry1.val(),country2=$selCountry2.val();if(country1&&country1.length>0) { _gaq.push(['_trackEvent','sticky bar','personalizeCountry1',country1]);}if(country2&&country2.length>0) { _gaq.push(['_trackEvent','sticky bar','personalizeCountry2',country2]);}e.preventDefault();});$('#stickystep2').click(function(e) {var sport1=$selDisc1.val(),sport2=$selDisc2.val();if(sport1!=='') {$stickydisc1.text($selDisc1.find(':selected').text());if($stickydisc1.text().length>20) {$stickydisc1.css("letter-spacing","-1px");}}else { $stickydisc1.text('');}if(sport2!=='') {$stickydisc2.text($selDisc2.find(':selected').text());if($stickydisc2.text().length>20) {$stickydisc2.css("letter-spacing","-1px");}}else { $stickydisc2.text('');}e.preventDefault();$('.choosesports,.stickyselect').addClass(hiddenClass);$myolympics.removeClass(hiddenClass);localStorage.setItem(discKey,sport1 + '_' + sport2,{ expires:60,path:'/'});var country1=$selCountry1.val(),country2=$selCountry2.val(),$opt_country1=$selCountry1.find('option[data-code="' + country1 + '"]').attr('selected','selected'),$opt_country2=$selCountry2.find('option[data-code="' + country2 + '"]').attr('selected','selected'),txt_country1=$opt_country1.text(),txt_country2=$opt_country2.text();if(country1) {$stickycountry1.html('<img src="/imgml/flags/s/' + country1 + '.png" title="' + txt_country1 + '" alt="' + txt_country1 + '" width="23" height="15" />' + country1.toUpperCase());}else { $stickycountry1.html('');}if(country2) {$stickycountry2.html('<img src="/imgml/flags/s/' + country2 + '.png" title="' + txt_country2 + '" alt="' + txt_country2 + '" width="23" height="15" />' + country2.toUpperCase());}else { $stickycountry2.html('');}localStorage.setItem(countryKey,country1 + '_' + country2,{ expires:60,path:'/'});if(sport1&&sport1.length>0) { _gaq.push(['_trackEvent','sticky bar','personalizeSport1',sport1]);}if(sport2&&sport2.length>0) { _gaq.push(['_trackEvent','sticky bar','personalizeSport2',sport2]);}var options=(sport1.length>0 ? 1:0) + (sport2.length>0 ? 1:0) + (country1.length>0 ? 1:0) + (country2.length>0 ? 1:0);_gaq.push(['_trackEvent','sticky bar','personalizeComplete']);execIfExists('select[id$="filterSport"],select[id$="filterCountry"]',function() {var $this=$(this);$this.find('.fave').removeClass('fave');$this.mySelect();});execIfExists('.customTabs',function() {var $this=$(this),$parent=$this.closest('.wrapTabs').parent(),genericTabOuter=$this.find('.tabItem.first').outerHtml();$this.html(genericTabOuter);$this.find('.tabItem').addClass('current');$parent.find('div[class*="tabCustom"]').not('.tabCustom-all').remove();$parent.find('.tabCustom-all').removeClass('hidden').addClass('current');$this.myTabs();});execIfExists('#schedule_gridWrap',function() {var $this=$(this);$('#my-schedule_sportsList').replaceWith('');$('#my-schedule_grid').replaceWith('');$this.mySchedule();});});$('#stickyedit').click(function(e) {$('.myolympics,.stickytitle').addClass(hiddenClass);$('.choosecountries').removeClass(hiddenClass);e.preventDefault();});};},myTabs:function($) {$.fn.myTabs=function(options) {var ispara=$('#sticky-myOly').attr('data-paralympics'),opts=$.extend({},$.fn.myTabs.defaults,options),countries=[],disciplines=[],countryKey='mycountries' + (ispara ? '_para':''),discKey='mysports' + (ispara ? '_para':''),cookieCountries=localStorage.getItem(countryKey),cookieSports=localStorage.getItem(discKey),tabsHtml=[],country='',discipline='';if(!cookieCountries&&!cookieSports) { return this;}countries=cookieCountries.split('_');disciplines=cookieSports.split('_');var lcountries=countries.length,ldisciplines=disciplines.length,toload=lcountries + ldisciplines,seo='',tabContent='',$this=this,setAjax=function(typebase,key,idx,alt) {tabContent += ['<div class="tabCustom-',(alt||key),' hidden"></div>'].join('');$.ajax({type:'get',url:[typebase,key,opts.base,'_tab.html'].join(''),dataType:'html',success:function(data) {tabsHtml[idx]=data;},complete:function() {toload--;if(toload<=0) {$.fn.myTabs.methods.init($this,opts,tabsHtml,tabContent,ispara);}}});},$c1options=$('#c1filterCountry>option'),$c2options=$('#c2filterCountry>option'),isFr=(window.location.pathname.indexOf('/fr')===0);while (lcountries) {country=countries[lcountries - 1];if(!country||country==='undefined') { lcountries--; toload--; continue;}var $optCountry1=$c1options.filter('[data-code="' + country + '"]'),$optCountry2=$c2options.filter('[data-code="' + country + '"]');seo='';if($optCountry1.is(':selected')) { seo=$optCountry1.attr('data-seo');}else if($optCountry2.is(':selected')) { seo=$optCountry2.attr('data-seo');}if(!seo) { lcountries--; toload--; continue;}setAjax.apply(this,[(ispara ? '/paralympics':'') + opts.typeBase.country + (isFr ? '/country=':''),seo,lcountries - 1,country]);lcountries--;}while (ldisciplines) {discipline=disciplines[ldisciplines - 1];if(!discipline||discipline==='undefined') { ldisciplines--; toload--; continue;}setAjax.apply(this,[(ispara ? '/paralympics':'') + opts.typeBase.disc,discipline,2 + ldisciplines - 1]);ldisciplines--;}};$.fn.myTabs.methods={init:function($this,opts,tabsHtml,tabContent,ispara) {if(!tabsHtml.length) { return;}var xhr=null;return $this.each(function() {var $ctx=$(this),$tabs=$ctx.append(tabsHtml.join('')),$wrapTabs=$tabs.parent().removeClass(opts.hiddenClass),$customAll=$wrapTabs.next('.tabCustom-all').after(tabContent);$wrapTabs.data('custom-file',$ctx.attr('data-file'));$wrapTabs.closest('.box').addClass('custom-tabbed');$wrapTabs.unbind('click').bind('click',function(e) {if(xhr) { xhr.abort();}e.preventDefault();var $target=$(e.target),$a=$target,$li=$target.closest('li'),tabType='';if($target.is('img')||$target.is('span.icon')) {$a=$target.closest('a');}else if($target.is('li')) {$li=$target;$a=$target.find('a');}tabType=$li.searchCssClass('tabtype-');if(!$a.is('a')) { return;}var $this=$(this),tabContentSelector=$a.attr('href').replace('#','.'),hasHref=tabContentSelector.indexOf('http')===0,href=window.location.href;$content=$this.siblings(hasHref ? tabContentSelector.replace(href,''):tabContentSelector),type=$this.searchCssClass('type-'),dataFile=$this.data('custom-file'),url=dataFile ? dataFile + '.html':opts.typeUrl[type],isFr=(window.location.pathname.indexOf('/fr')===0);base=(ispara ? '/paralympics':'') + opts.typeBase[tabType] + (isFr&&tabType=='country' ? 'country=':'');var callback=function($li) {this.find('.tabItem.current').removeClass(opts.currentClass).end().siblings('.' + opts.currentClass).removeClass(opts.currentClass).addClass(opts.hiddenClass);$content.removeClass(opts.hiddenClass).addClass(opts.currentClass);$li.addClass(opts.currentClass);};if(!base) {callback.apply($this,[$li]);return;}if($content.html().length) {callback.apply($this,[$li]);return;}xhr=$.ajax({type:'get',url:[base,$a.attr('data-seo'),opts.base,url].join(''),context:$content,complete:function(xhr) {if(!xhr&&!xhr.responseText) { return;}var html=xhr.responseText,$this=$(this);if(html.length>1) {$this.html(html);}var cls=$this.searchCssClass('tabCustom-',{ rawVal:true}),_$wrap=$this.parent().find('.wrapTabs');callback.apply(_$wrap,[_$wrap.find('a[href="' + (hasHref ? href:'') + '#' + cls + '"]').closest('li')]);execIfExists($this.find(".jcarousel"),"jCarousel",window.jcarouselCfg);}});});});}};$.fn.myTabs.defaults={base:'/library/custom/',typeBase:{ disc:'/disciplines/discipline=',country:'/country/'},typeUrl:{ news:'_latestnews.html',photos:'_latestpictures.html',galleries:'_latestgalleries.html'},hiddenClass:'hidden',currentClass:'current'};},mySelect:function($) {$.fn.mySelect=function(options) {var ispara=$('#sticky-myOly').attr('data-paralympics'),opts=$.extend({},$.fn.mySelect.defaults,options),countries=[],disciplines=[],countryKey='mycountries' + (ispara ? '_para':''),discKey='mysports' + (ispara ? '_para':''),cookieCountries=localStorage.getItem(countryKey),cookieSports=localStorage.getItem(discKey);if(!cookieCountries&&!cookieSports) { return this;}countries=cookieCountries.split('_');disciplines=cookieSports.split('_');return this.filter(function() {return $(this).closest('#sticky-myOly').length===0;}).find('option').each(function() {var dataValue=this.getAttribute('data-value'),dataSeo=this.getAttribute('data-seo')||'undefined',valueLower='undefined',txt=this.text.toLowerCase();if(dataValue) {valueLower=dataValue.toLowerCase();}if(valueLower===countries[0]||valueLower===countries[1]||txt===disciplines[0]||txt===disciplines[1]||dataSeo===disciplines[0]||dataSeo===disciplines[1]) {this.className += ' ' + opts.selectedClass;}});};$.fn.mySelect.defaults={selectedClass:'fave'};},mySchedule:function($) {$.fn.mySchedule=function(options) {var isbydisc=this.attr('data-bydisc'),ispara=$('#sticky-myOly').attr('data-paralympics'),opts=$.extend({},options),disciplines=[],discKey='mysports' + (ispara ? '_para':''),cookieSports=localStorage.getItem(discKey),l=2,i=0,$sportsList=[],$scheduleGrid=[],$faveDisc,$faveRow,addClass=false;if(isbydisc==='1') { return this;}if(!cookieSports||cookieSports==='_') { return this;}disciplines=cookieSports.split('_');$sportsList=$('#schedule_sportsList');$scheduleGrid=$('#schedule_rows');for (i; i<l; i++) {if(!disciplines[i].length) { continue;}var disc=$('#d' + (i + 1) + 'filterSport>option[data-seo="' + disciplines[i] + '"]').attr('data-code');if(!disc||!disc.length) { continue;}var $faveDiscClone=$sportsList.find('#disc-' + disc).clone(true),$faveRowClone=$scheduleGrid.find('#row-' + disc).clone(true);if($faveDiscClone.length) {if(!$faveDisc) {$faveDisc=$('<ul id="fave-schedule-disc"/>').prependTo($sportsList);$faveDisc.wrap('<div id="my-schedule_sportsList"/>');}if(!$faveRow) {$faveRow=$('<ul id="fave-schedule-row"/>').insertBefore($scheduleGrid);$faveRow.wrap('<div id="my-schedule_grid"/>');}$faveDiscClone.attr('id',$faveDiscClone.attr('id') + '_fave');$faveDiscClone.appendTo($faveDisc);$faveRowClone.attr('id',$faveRowClone.attr('id') + '_fave');$faveRowClone.appendTo($faveRow);addClass=true;}}if(addClass) { this.addClass('my-schedule');}};}});window.$core=jQuery.extend({},window.$core,{jLightbox:function($) {$.fn.jLightbox=function(opts) {var self=this.jLightbox.methods.coreInit($.extend({},$.fn.jLightbox.defaults,opts));return this.each(function() {var $this=$(this);$this.jLightbox.methods.init.apply(self,[$this]);});};$.fn.jLightbox.methods={opts:null,$ctx:null,actualImage:0,$overlay:null,$wrap:null,$innerWrap:null,$img:null,$btnPrev:null,$btnNext:null,$loading:null,$caption:null,$galleryTitle:null,isPhotolist:false,$title:null,$full:null,$imageWrap:null,$imageDataBox:null,$currentNumber:null,$nav:null,$close:null,$activeElement:null,$playPause:null,sizes:null,scrolls:null,$body:null,$html:null,$document:null,$hideable:null,$imagesList:null,paused:false,key:null,coreInit:function(opts) {var self=this;self.$body=$('body');self.$html=$('html');self.$document=$(document);self.$hideable=$('embed,object,select');self.opts=opts;self.paused=!opts.autoplay;if(!self.opts.onKeyUp) {self.opts.onKeyUp=self.onKeyUp;}self._setHtmlElement('$overlay',self.opts.overlay,'<div id="jquery-overlay" class="jlightbox-shadow ' + self.opts.hiddenClass + '"></div>');self._setHtmlElement('$wrap',self.opts.wrap,'<div id="jquery-lightbox" class="' + self.opts.hiddenClass + '"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="__jLightbox-image"/><div id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev">&nbsp;</a><a href="#" id="lightbox-nav-btnNext">&nbsp;</a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="' + self.opts.imageLoading + '"/></a></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="__jLightbox-close"></div></div></div></div></div>');self.$innerWrap=$('#lightbox-container-image-box');self.$img=$('#__jLightbox-image');self.$loading=$('#lightbox-loading');self.$caption=$('#lightbox-image-details-caption');self.$imageWrap=$('#lightbox-container-image');self.$imageDataBox=$('#lightbox-container-image-data-box');self.$currentNumber=$('#lightbox-image-details-currentNumber');self.$nav=$('#lightbox-nav');self.$btnPrev=$('#lightbox-nav-btnPrev').prop('next',-1);self.$btnNext=$('#lightbox-nav-btnNext').prop('next',1);self.$title=$('#lightbox-title').hide();self.$wrap.bind('click',function(e) {var $target=$(e.target);if(!$target.parents('#jquery-lightbox').length) {self.finish();}});self.$close=$('#__jLightbox-close').add(self.$overlay).bind('click',function(e) {e.preventDefault();self.finish();});$(window).resize(function() {self.sizes=self._copyOf_getPageSize();self.scrolls=self._copyOf_getPageScroll();self._setBaseSizes();});if(self.opts.onInit) { self.opts.onInit.apply(self,arguments);}return self.sync();},init:function($this) {var self=this;self.$ctx=$this;self.key=['jlightbox-key',new Date().getTime()].join('');self.$ctx.find(self.opts.itemSelector).bind('click',function(e) {e.preventDefault();var $item=$(this);var $self=self._getData($item);$self.actualImage=$self.$ctx.find(self.opts.itemSelector).index($item);$self.$hideable.css({ 'visibility':'hidden'});$self.onClick.apply($self,arguments);$self.sync($item);});self._setFilter();self.$imagesList=self.$ctx.find(self.opts.photoSelector);return self.sync();},finish:function() {var self=this;self.$overlay.add(self.$wrap).attr('style','');self.$document.unbind('keyup keypress');self.$btnPrev.add(self.$btnNext).unbind('click');self.$hideable.css({ 'visibility':'visible'});self.$nav.add(self.$close).add(self.$currentNumber).hide();if(self.opts.onFinish) {self.opts.onFinish.apply(self,arguments);}},show:function() {var self=this;self.$loading.hide();if(self.$currentNumber.is(':hidden')) {self.$currentNumber.show();}if(self.$nav.is(':hidden')) {self.$nav.add(self.$close).show();if(self.opts.onSummaryInit) {self.opts.onSummaryInit.apply(self);self.$full=$('#lightbox-full');}document.getElementById('lightbox-nav-landing').focus();}if(self.$title.is(':hidden')) {self.$title.show();}self.$img.fadeIn(function() {self._showData.apply(self,arguments);self._setNavigation.apply(self,arguments);});self._preloadNeighbor();},setImage:function(callback) {var self=this;if(self.opts.onBeforeImageSet) { self.opts.onBeforeImageSet.apply(self,arguments);}self.$loading.show();self.$btnNext.add(self.$btnPrev).unbind('hover').addClass(self.opts.disabledClass);self.$caption.hide();self.$currentNumber[0].innerHTML=([self.actualImage + 1,' / ',self.$imagesList.length].join(''));var o=self.$imagesList[self.actualImage];if(o.className.indexOf(self.opts.summaryFilter)===-1) {var imgPreloader=new Image();imgPreloader.onload=function() {var w=imgPreloader.width;var h=imgPreloader.height;if(!w||w===1) { w=self.opts.fallback.width;}if(!h||h===1) { h=self.opts.fallback.height;}self.$img.attr('src',(o.getAttribute('data-href')||o.href)).attr('width',w).attr('height',h);self._setImageBoxSizes(w,h);imgPreloader.onload=function() {};if(callback) { callback.apply(self);}if(self.opts.onAfterImageSet) { self.opts.onAfterImageSet.apply(self,arguments);}imgPreloader=null;};imgPreloader.src=(o.getAttribute('data-href')||o.href);self.$img.hide();}else {self.$img.hide();self.$loading.hide();self._setNavigation.apply(self);if(self.opts.onSummary) {self.opts.onSummary.apply(self,[o]);}}return self;},timedPlay:function() {var self=this;self._timedPlay(self.paused);},_timedPlay:function(paused) {var self=this;if(window.__jtm) { self.pause.apply(self);}if(paused) {if(self.$playPause&&self.$playPause.length&&!self.$playPause.hasClass('jlightbox-pause')) {self.$playPause.addClass('jlightbox-pause');}return;}window.__jtm=setTimeout(function() {self._moveNext.apply(self,[function() {self._timedPlay.apply(self);}]);},self.opts.playSpeed);},restart:function() {var self=this;if(self.paused) { return;}self.timedPlay.apply(self,arguments);},pause:function() {clearTimeout(window.__jtm);window.__jtm=null;},sync:function($o) {var self=this;self._toData(self.$btnPrev.add(self.$btnNext));if(self.$ctx) {self._toData(self.$ctx.find(self.opts.itemSelector));}if($o) { self._toData($o);}return self;},onClick:function() {var self=this;self.$galleryTitle=self.$ctx.find('.gallery-title');if(!self.$galleryTitle.length) {self.$galleryTitle=self.$ctx.parents('.box:first').find('.bH').find('h3');self.isPhotolist=true;}self.$title.text(self.$galleryTitle.text());self.$document.bind('keyup keypress',function() {var _self=$(this).data('active-self');if(_self.$wrap.is(':visible')) {_self.opts.onKeyUp.apply(_self,arguments);}else { self.$document.unbind('keyup keypress');}});self.$btnPrev.add(self.$btnNext).bind('click',function(e) {e.preventDefault();var $btn=$(this);if($btn.prop('next')===1) { self._moveNext.apply(self);}else { self._movePrev.apply(self);}});self.setImage();self.scrolls=self._copyOf_getPageScroll();self.sizes=self._copyOf_getPageSize();self._setBaseSizes();self.$overlay.css({ opacity:self.opts.overlayOpacity,backgroundColor:self.opts.overlayBgColor}).fadeIn();self.$wrap.show();self.$document.data('active-self',self);if(self.opts.onClick) {self.opts.onClick.apply(self,arguments);}},onKeyUp:function(e) {var code=e.keyCode||e.which;var self=this;if(e.type==='keyup') {switch (code) {case 27:self.finish();break;case 39:case 78:self._moveNext.apply(self,[self.opts.onNextKey]);break;case 37:case 80:self._movePrev.apply(self,[self.opts.onPrevKey]);break;case 9:case 16:self.$activeElement=$(document.activeElement);break;case 32:if(self.$activeElement&&self.$activeElement.length) {if(self.$activeElement.is(self.$close)) { self.finish();}else if(self.$activeElement.is(self.$btnNext)) { self._moveNext.apply(self,[self.opts.onNextKey]);}else if(self.$activeElement.is(self.$btnPrev)) { self._movePrev.apply(self,[self.opts.onPrevKey]);}else if(self.$activeElement.is(self.$full)) { window.location.href=self.$full.attr('href');}else if(self.opts.onSpacebarKey) { self.opts.onSpacebarKey.apply(self);}}break;}}else {switch (code) {case 38:case 40:case 33:case 34:case 36:case 35:case 32:e.preventDefault();break;}}},_toData:function($o) {$o.parent().data('self',$.extend({},this));},_getData:function($o) {return $o.parent().data('self');},_moveNext:function(trueCallback) {var self=this;if(!(self.actualImage + 1>=self.$imagesList.length)) {self.actualImage++;self.setImage(trueCallback);}else if(!trueCallback) { self.pause.apply(self,arguments);}},_movePrev:function(callback) {var self=this;if(!(self.actualImage - 1<0)) {self.actualImage--;self.setImage();}if(callback) { callback.apply(self);}},_setFilter:function() {var self=this,p;var _filter=self.opts.filter;if(!_filter.selector) { return;}if(!self.$ctx.is(_filter.selector)) { return;}for (p in _filter) {if(p!=='selector'&&self.opts.hasOwnProperty(p)) {self.opts[p]=_filter[p];}}},_setImageBoxSizes:function(imgWidth,imgHeight,altCallback) {var self=this;var currentWidth=self.$innerWrap.width();var currentHeight=self.$innerWrap.height();var $c=self.$imageWrap;var paddingTop=10,paddingBottom=10,paddingLeft=10,paddingRight=10;var sizes=self.opts.paddingSize;if(sizes) {if(typeof (sizes)===typeof ([])) {paddingTop=sizes[0];paddingRight=sizes[1];paddingBottom=sizes[2];paddingLeft=sizes[3];}else {paddingBottom=paddingLeft=paddingRight=paddingTop=sizes;}}else if(paddingTop=parseInt($c.css('padding-top'),10)) {paddingRight=parseInt($c.css('padding-right'),10);paddingBottom=parseInt($c.css('padding-bottom'),10);parseInt($c.css('padding-left'),10);}var width=(imgWidth + (paddingLeft + paddingRight));var height=(imgHeight + (paddingTop + paddingBottom));var diffW=currentWidth - width;var diffH=currentHeight - height;if((diffW==0)&&(diffH==0)) {setTimeout(function() {if(altCallback) {altCallback.apply(self);}else {self.show();}},100);}else {self.$innerWrap.parent().css({ width:width,height:height});self.$innerWrap.animate({ width:width,height:height},self.opts.resizeSpeed,function() {if(altCallback) {altCallback.apply(self);}else {self.show();}});}self.$imageDataBox.css({ width:imgWidth});},_setBaseSizes:function() {var self=this;self.$overlay.css({width:self.sizes[0],height:self.sizes[1]});self.$wrap.css({top:self.scrolls[1] + (self.sizes[3] / 10),left:self.scrolls[0]});},_setHtmlElement:function(prop,value,defContent) {if(value) {if(value.indexOf('#')===0||value.indexOf('.')===0) {this[prop]=$(value);}else {var re=/#{[a-zA-Z]*}/g;var m=value.match(re);var i=m.length;while (i) {var r=m[i - 1];value=value.replace(r,this.opts[r.substring(2,r.length - 1)]);i--;}this[prop]=$(value).appendTo('body');}}else {this[prop]=$(defContent).appendTo('body');}},_showData:function() {var self=this;var $photodata=$(self.opts.photoSelector,self.$ctx).eq(self.actualImage).find(".photo-data");if(self.$imagesList[self.actualImage]&&$photodata.length) {self.$caption.html($photodata.html()).show();}},_setNavigation:function() {var self=this;if(self.actualImage>0) {self.$btnPrev.removeClass(self.opts.disabledClass);}if(self.actualImage<(self.$imagesList.length - 1)) {self.$btnNext.removeClass(self.opts.disabledClass);}},_preloadNeighbor:function() {var self=this;if((self.$imagesList.length - 1)>self.actualImage) {var objNext=new Image();objNext.src=self.$imagesList[self.actualImage + 1].href;}if(self.actualImage>0) {var objPrev=new Image();objPrev.src=self.$imagesList[self.actualImage - 1].href;}},_copyOf_getPageSize:function() {var xScroll,yScroll;if(window.innerHeight&&window.scrollMaxY) {xScroll=window.innerWidth + window.scrollMaxX;yScroll=window.innerHeight + window.scrollMaxY;}else if(document.body.scrollHeight>document.body.offsetHeight) {xScroll=document.body.scrollWidth;yScroll=document.body.scrollHeight;}else {xScroll=document.body.offsetWidth;yScroll=document.body.offsetHeight;}var windowWidth,windowHeight;if(self.innerHeight) {if(document.documentElement.clientWidth) {windowWidth=document.documentElement.clientWidth;}else {windowWidth=self.innerWidth;}windowHeight=self.innerHeight;}else if(document.documentElement&&document.documentElement.clientHeight) {windowWidth=document.documentElement.clientWidth;windowHeight=document.documentElement.clientHeight;}else if(document.body) {windowWidth=document.body.clientWidth;windowHeight=document.body.clientHeight;}if(yScroll<windowHeight) {pageHeight=windowHeight;}else {pageHeight=yScroll;}if(xScroll<windowWidth) {pageWidth=xScroll;}else {pageWidth=windowWidth;}arrayPageSize=[pageWidth,pageHeight,windowWidth,windowHeight];return arrayPageSize;},_copyOf_getPageScroll:function() {var xScroll,yScroll;if(self.pageYOffset) {yScroll=self.pageYOffset;xScroll=self.pageXOffset;}else if(document.documentElement&&document.documentElement.scrollTop) {yScroll=document.documentElement.scrollTop;xScroll=document.documentElement.scrollLeft;}else if(document.body) {yScroll=document.body.scrollTop;xScroll=document.body.scrollLeft;}return [xScroll,yScroll];}};$.fn.jLightbox.defaults={itemSelector:'.thumb',photoSelector:'.lbPhotoItem',hiddenClass:'hide',disabledClass:'disabled',summaryFilter:'jlightbox-summary',dataSelector:'.lbWrap',fallback:{ width:638,height:359},filter:{ selector:null},autoplay:true,playSpeed:3000,excludesFromClick:null,paddingSize:null,resizeSpeed:400,overlay:null,overlayBgColor:'#000',overlayOpacity:0.8,imageLoading:'/imgml/lightbox/lightbox-ico-loading.gif',imageBtnClose:'/imgml/lightbox/lightbox-btn-close.gif',wrap:null,onInit:null,onClick:null,onFinish:null,onSummary:null,onSummaryInit:null,onBeforeImageSet:null,onAfterImageSet:null,onNextKey:null,onPrevKey:null,onCancel:null,onNext:null,onPrev:null,onKeyUp:null,onSpacebarKey:null};}});window.$core=jQuery.extend({},window.$core,{tooltip:function($) {$.fn.tooltip=function(options) {var defaults={debug:false,console:false,tSelector:null,ajaxHref:true,cssClass:null,position:'auto',cSelector:'#jquery-tooltip-content',isInner:false,imgLoading:'/imgml/ajax-loader.gif',lazyLoadImg:false,click:{ fire:false,callback:null,once:false},live:{ fire:false,selector:null,parent:null}};var options=$.extend({},defaults,options),$_d=$(document),_dHeight=$_d.height(),_dWidth=$_d.width(),$_w=$(window),_wHeight=$_w.height(),_wWidth=$_w.width();_appendDebug();var _t=_getTooltip(),$this,_cExists=false,_img=_getImage(),_tm=null;return this.each(function() {$this=$(this);var _c=_getContentSelector();_cExists=__exists(_c);if(options.click.fire) {$this.data('tooltip_once',options.click.once);if(options.click.once&&$this.data('tooltip_fired')) {return;}$this.bind('click.tooltip',function(evt) {evt.preventDefault();if(__exists(_c)) {if(_c.html().length>1) {_t.html(_c.html());_setCss(_t,evt).show(0);var _$this=$(this);_$this.data('tooltip_fired',true);if(_$this.data('tooltip_once')&&$this.data('tooltip_fired')) {_$this.unbind('click.tooltip');}setTimeout(function() {_t.hide();if(options.click.callback) {options.click.callback.apply(this);}},1000);}}});return;}var _mouseEnter=function(evt) {_setClass();var _$this=$(this).bind('mousemove.tooltip',function(evt) {if(_img&&_img.is(':visible')) {_setCss(_img,evt);}else {_setCss(_t,evt);}});var callback=function() {if(options.lazyLoadImg) {_c.html(_lazyLoad(_c.html(),_$this));_t.html(_c.html());}_setCss(_t,evt).show(0);};if(options.ajaxHref) {var _url=null;if(options.isInner) { _url=_c.html();}if(!_url) { _url=$(evt.target).attr('href');}if(_url) {_setCss(_img,evt).show();$.get(_url,function(data) {_img.hide();_t.html(data);callback();});}else { callback();}}else if(__exists(_c)) {if(_c.html().length>1) {_t.html(_c.html());callback();}}},_mouseLeave=function() {$(this).unbind('mousemove.tooltip');_t.hide();};if(options.live.fire&&options.live.selector) {(options.live.parent ? $(options.live.parent):$this.parent()).delegate(options.live.selector,'mouseenter.tooltip',_mouseEnter).delegate(options.live.selector,'mouseleave.tooltip',_mouseLeave);}else {$this.unbind('mouseenter.tooltip').bind('mouseenter.tooltip',_mouseEnter).unbind('mouseleave.tooltip').bind('mouseleave.tooltip',_mouseLeave);}});function _lazyLoad(_html,$o) {var _id=$o&&$o.length ? $o.attr('id'):undefined,result=_html,re=new RegExp(/\$\.img\[src:'+([\w\.-:]*)+'[,alt:+'(\w\s\.\-:#)']*[,cls:'+(/\w\s\.\-:)+']*[,w:+(\d)]*[,h:+(\d)]*\]/gim),m=re.exec(result),i=0;if(!m) { return result;}var orig=m[0],tmp=orig,src='',w='',wIdx=-1,h='',hIdx=-1,alt='',altIdx=-1,cls='',clsIdx=-1,output;srcIdx=orig.indexOf('src:');tmp=orig.substr(srcIdx + 5);src=tmp.substr(0,tmp.indexOf('\''));altIdx=orig.indexOf('alt:');if(altIdx!==-1) {tmp=orig.substr(altIdx + 5);alt='alt="' + tmp.substr(0,tmp.indexOf('\'')) + '" ';}clsIdx=orig.indexOf('cls:');if(clsIdx!==-1) {tmp=orig.substr(clsIdx + 5);cls=tmp.substr(0,tmp.indexOf('\''));}wIdx=orig.indexOf('w:');if(wIdx!==-1) {tmp=orig.substr(wIdx + 2);w=tmp.substr(0,tmp.indexOf(','));}hIdx=orig.indexOf('h:');if(hIdx!==-1) {tmp=orig.substr(hIdx + 2);h=tmp.substr(0,tmp.indexOf(']'));}if(_id&&_id.length&&_id.indexOf('athlete-')!==-1) {_id=_id.replace('athlete-','');if(!isNaN(_id)) {src=src.substring(0,src.lastIndexOf('/') + 1) + _id + '.png';}}output=['<img src="',src,'" class="',cls||'or-as','" ',alt,'width="',w||64,'" height="',h||80,'"/>'].join('');result=result.replace(orig,output);m=re.exec(result);if(m) {result=$.fn.lazyImagesReplace(result);}return result;};function _appendDebug() {if(options.debug&&!__exists('#debug')) { $('body').append('<div id="debug"></div>');}};function _getTooltip() {var _o=null;if(options.tSelector) { _o=$(tSelector);}else if(!(_o=__exists('#jquery-tooltip'))) { _o=$('<div id="jquery-tooltip" style="display:none"></div>').appendTo('body');}return _o;};function _getImage() {var _o=null;if(options.ajaxHref) {if(!(_o=__exists('#jquery-tooltip-loader'))) {_o=$('<img src="' + options.imgLoading + '" id="jquery-tooltip-loader" style="position:absolute;display:none"/>').appendTo('body');}}return _o;};function _setClass() {_t.attr('class','');if(options.cssClass) { _t.addClass(options.cssClass);}};function _debug(s,append) {if(options.debug) {var _a='';if(append) { _a=$('#debug').html();}$('#debug').html(_a + s);}else if(options.console) { console.log(s);}};function _setCss(o,evt) {var result={};switch (options.position) {case 'auto':var _left=evt.pageX + 15;var _top=evt.pageY + 10;var _cLeft=_left + o.outerWidth(true);if(_cLeft>_dWidth||(_cLeft>=(_wWidth + $_w.scrollLeft()))) { _left=evt.pageX - o.outerWidth() - 7;}var _cTop=_top + _t.outerHeight(true);if((_cTop>_dHeight)||(_cTop>=(_wHeight + $_w.scrollTop()))) { _top=evt.pageY - o.outerHeight() + 5;}result={ left:_left,top:_top};break;case 'bl':result={ left:evt.pageX - o.outerWidth() - 7,top:evt.pageY + 10};break;case 'bc':result={ left:evt.pageX - (o.outerWidth() / 2),top:evt.pageY + 10};break;case 'br':result={ left:evt.pageX + 15,top:evt.pageY + 10};break;case 'rc':result={ left:evt.pageX + 15,top:evt.pageY - (o.outerHeight() / 2)};break;case 'tr':result={ left:evt.pageX + 15,top:evt.pageY - o.outerHeight() + 5};break;case 'tc':result={ left:evt.pageX - (o.outerWidth() / 2),top:evt.pageY - o.outerHeight() + 5};break;case 'tl':result={ left:evt.pageX - o.outerWidth() - 7,top:evt.pageY - o.outerHeight() + 5};break;case 'lc':result={ left:evt.pageX - o.outerWidth() - 7,top:evt.pageY - (o.outerHeight() / 2)};break;}_debug(result.left + ' ' + result.top + ' ');return o.css(result);};function _getContentSelector() {return options.isInner ? $($this).find(options.cSelector):$(options.cSelector);}function __exists(sel) {var _s=$(sel);return _s.length>0 ? _s:null;}};}});window.$core=jQuery.extend({},window.$core,{jPhotoReader:function($) {$.fn.jPhotoReader=function(opts) {return $.fn.jPhotoReader.methods.init(this,$.extend({},$.fn.jPhotoReader.defaults,opts));};$.fn.jPhotoReader.defaults={carouselSelector:'#items-carousel',singleItemSelector:'.thumbs-single-item',frameSelector:'#frame',imageSelector:'img.photo',linkSelector:'a.nL',currentCssClass:'current',visibleItem:4,scrollItems:4,horizontal:false,autoplay:true,dataCfg:{ selector:'#frame .figcaption',ajaxUrl:'/_galleries/library/galleryid={0}/photodetails.html',onSuccessLoad:null}};$.fn.jPhotoReader.methods={xhr:null,init:function($this,opts) {var self=this;self.$data=$(opts.dataCfg.selector);self.opts=opts;self.$ctx=$this;self.$frame=self.$ctx.find(opts.frameSelector).css({ position:'absolute',zIndex:2});self.$image=self.$frame.find(opts.imageSelector);self.$link=self.$frame.find(opts.linkSelector);self.$carousel=$this.find(opts.carouselSelector);self.$readerJson=$this.find('#reader_json');if(self.$readerJson.length) {self.jsonData=jQuery.parseJSON(self.$readerJson.text());}$this.find('#jcarouselReader-btn-playPause').bind('click',function(e) {e.preventDefault();var $thisbutton=$(this);$thisbutton.toggleClass('jcarouselReader-play');if($thisbutton.hasClass('jcarouselReader-play')) {$thisbutton.removeClass('jcarouselReader-pause');$thisbutton.attr('title','Play');opts.autoplay=false;$thisbutton.html('Play');clearTimeout(self.$timer);return;}$thisbutton.addClass('jcarouselReader-pause');$thisbutton.attr('title','Pause');opts.autoplay=true;self.autoMove();$thisbutton.html('Pause');});self.$carousel.bind('click',function(e) {self.move.apply(self,[e]);});execIfExists(self.$carousel,'jCarousel',{horizontal:opts.horizontal,visible:opts.visibleItem,scroll:opts.scrollItems});if(opts.autoplay) { self.autoMove();}return $this;},autoMove:function() {var self=this;if(self.$timer) {clearTimeout(self.$timer);}self.$timer=setTimeout(function(s) {var idx=self.$carousel.find('.' + self.opts.currentCssClass).index();if(!idx) { idx=0;}idx++;if(idx>self.$carousel.find(self.opts.singleItemSelector).length - 1) { idx=0;}if(idx % self.opts.visibleItem==0) { self.$carousel.data('__jcarousel').inner.scroll(idx,true);}clearTimeout(s);self.move.apply(self,[null,idx,self.autoMove]);self=null;},5000);},move:function(e,idx,callback) {var self=this,transitionSpeed=100,$target=!isNaN(idx) ? self.$carousel.find('.' + self.opts.singleItemSelector + ':eq(' + idx + ')'):$(e.target),itemRef=-1,$li,liIdx,$following,itemFollowingRef;if(!($target.is(self.opts.singleItemSelector)||$target.parents(self.opts.singleItemSelector).length)) {self=null;$target=null;return;}if(e) { e.preventDefault();}$li=$target.closest('li');if($li.hasClass(self.opts.currentCssClass)) {$li=null;self=null;$target=null;return;}if(!$target.is(self.opts.singleItemSelector)) {$target=$target.parents(self.opts.singleItemSelector);}self.$carousel.find(self.opts.singleItemSelector).removeClass(self.opts.currentCssClass);$target.addClass(self.opts.currentCssClass);itemRef=$target.searchCssClass('item-');liIdx=$li.index();$following=$li.next(':first');itemFollowingRef=$li.searchCssClass('item-');var changeItemCallback=function() {var $a=$target.find('a:first');var href=$a.attr('data-href')||$a.attr('href');self.$link.attr('href',$a.attr('href'));var imgPreloader=new Image();imgPreloader.onload=function() {self.$image.attr('src',imgPreloader.src);imgPreloader.onload=function() {};if(self.opts.autoplay) {self.autoMove.apply(self);}else {clearTimeout(self.$timer);}$a=null;imgPreloader=null;};imgPreloader.src=href;};if($target[0].dataValue&&$target[0].dataValue.length>0) {self.$data.html($target[0].dataValue);self.$data.fadeOut(transitionSpeed,function() {changeItemCallback();self.$data.fadeIn(transitionSpeed);$li=null;$target=null;$following=null;});return;}if(self.xhr) { self.xhr.abort();}if(self.jsonData) {var i=0,l=self.jsonData.length,j;self.$data.fadeOut(transitionSpeed,function() {for (i; i<l; i++) {j=self.jsonData[i],html='',$a=null,title='';if(j.id!==itemRef) {j=null;continue;}$a=$target.find('a:first'),title=$a.find('img').attr('title');html='<a class="nL" href="' + $a.attr('href') + '"><img class="photo" src="' + $a.attr('data-href') + '" width="540" height="304" alt="' + title + '" /><span class="figcaption"><span class="newsTitle">' + title + '</span></span></a>';if(j.rel.country||j.rel.disc||j.rel.evt||j.rel.ath) {html += '<div class="relatedItems"><ul>';if(j.rel.country) {html += '<li><span class="wrapItem"><a href="' + j.rel.country.url + '"><img class="fgs" src="' + j.rel.country.src + '" alt="' + j.rel.country.code + '" width="' + j.rel.country.w + '" height="' + j.rel.country.h + '"/>' + j.rel.country.code + '</a></span></li>';}if(j.rel.disc) {html += '<li><div class="disc"><span class="wrapItem"><a title="' + j.rel.disc.name + '" href="' + j.rel.disc.url + '"><span class="icon ' + j.rel.disc.code + '"></span>' + j.rel.disc.name + '</a></span></div></li>';}if(j.rel.evt) {html += '<li><span class="wrapItem">' + (j.rel.evt.url ? '<a href="' + j.rel.evt.url + '">':'') + j.rel.evt.descr + '</span></li>';}if(j.rel.ath) {var i2=0,l2=j.rel.ath.length,ath;for (i2; i2<l2; i++) {ath=j.rel.ath[i2];html += '<li><span class="wrapItem"><a href="' + ath.url + '">' + ath.descr + '</a></span></li>';}}html += '</ul></div>';}changeItemCallback();self.$data.html(html);$target[0].dataValue=html;if(self.opts.dataCfg.onSuccessLoad) {self.opts.dataCfg.onSuccessLoad.apply(self,[html]);}self.$data.fadeIn(transitionSpeed);$a=null;$li=null;$following=null;break;}});return;}self.xhr=$.ajax({url:self.opts.dataCfg.ajaxUrl.replace('{0}',itemRef),type:'GET',success:function(html) {if(html.length>1) {self.$data.fadeOut(transitionSpeed,function() {changeItemCallback();self.$data.html(html);$target[0].dataValue=html;if(self.opts.dataCfg.onSuccessLoad) {self.opts.dataCfg.onSuccessLoad.apply(self,[html]);}self.$data.fadeIn(transitionSpeed);});}}});}};}});window.$core=jQuery.extend({},window.$core,{medalStandings:function($) {$.fn.medalStandings=function(options) {return $.fn.medalStandings.methods.init(this,$.extend({},$.fn.medalStandings.defaults,options));};$.fn.medalStandings.methods={init:function($this,opts) {var $ctx=$this;if($ctx.is(".sortable")) {execIfExists($ctx,'tablesorter',{headers:{0:{ sorter:false},1:{ sorter:false},2:{ sorter:false},3:{ sorter:false},4:{ sorter:false},5:{ sorter:false},6:{ sorter:false},7:{ sorter:false},9:{ sorter:false},10:{ sorter:false},11:{ sorter:false}},widgets:['zebra']});$ctx.find('.view').removeClass('header').addClass('{sorter:false}nosort');var $barColumns=$ctx.find('td:nth-child(6)').add($ctx.find('th.all_medals')).hide();var $barTableItems=$ctx.find('th.medal,td.gold,td.silver,td.bronze');$ctx.find('.switchTable').bind('click',function(e) {var $target=$(e.target);if(!($target.is('a'))) { return true;}e.preventDefault();var $this=$(this);var $active=$this.find('.active');if($active.is($target)) { return;}var toggleMethodName=$target.is('.show_grid') ? 'hide':'show';$this.find('a').removeClass('active');$target.addClass('active');$barColumns[toggleMethodName]();toggleMethodName=toggleMethodName=='hide' ? 'show':'hide';$barTableItems[toggleMethodName]();});}}};},medallists:function($) {$.fn.medallists=function(options) {return this.each(function() {$.fn.medallists.methods.init($(this),$.extend({},$.fn.medallists.defaults,options));});};$.fn.medallists.methods={init:function($this,opts) {var $ctx=$this;if($ctx.is(".sortable")) {execIfExists($ctx,'tablesorter',{headers:{0:{ sorter:false},1:{ sorter:false},2:{ sorter:false}},widgets:['zebra']});}}};},historicalMedalStandings:function($) {$.fn.historicalMedalStandings=function(options) {return $.fn.historicalMedalStandings.methods.init(this,$.extend({},$.fn.historicalMedalStandings.defaults,options));};$.fn.historicalMedalStandings.methods={init:function($this,opts) {var $ctx=$this;if($ctx.is(".sortable")) {execIfExists($ctx,'tablesorter',{headers:{0:{ sorter:false},1:{ sorter:false},2:{ sorter:false},3:{ sorter:false},4:{ sorter:false},5:{ sorter:false},6:{ sorter:false},8:{ sorter:false},9:{ sorter:false},10:{ sorter:false}},widgets:['zebra']});$ctx.find('.view').removeClass('header').addClass('{sorter:false}nosort');var $barColumns=$ctx.find('td:nth-child(5)').add($ctx.find('th.all_medals')).hide();var $barTableItems=$ctx.find('th.medal,td.gold,td.silver,td.bronze');$ctx.find('.switchTable').bind('click',function(e) {var $target=$(e.target);if(!($target.is('a'))) { return true;}e.preventDefault();var $this=$(this);var $active=$this.find('.active');if($active.is($target)) { return;}var toggleMethodName=$target.is('.show_grid') ? 'hide':'show';$this.find('a').removeClass('active');$target.addClass('active');$barColumns[toggleMethodName]();toggleMethodName=toggleMethodName=='hide' ? 'show':'hide';$barTableItems[toggleMethodName]();});}}};},medalsCompare:function($) {$.fn.medalsCompare=function() {return $.fn.medalsCompare.methods.init(this);};$.fn.medalsCompare.methods={init:function($this) {var self=this;$('#c1,#c2').bind('change.compare',function() {var ccode=$(this).val(),id=this.getAttribute('id'),$medals_compare=$('#medals_compare_' + id);if($medals_compare[0]['dataValue_' + ccode]) {$medals_compare.html($medals_compare[0]['dataValue_' + ccode]);self.drawBarsSmall($this);return;}$medals_compare.load('/externalmodules/medals/country/' + ccode + '/countryMedals.html',function(response,status,xhr) {this['dataValue_' + ccode]=response;if(status=="error"||response.indexOf('urlmapper_Errors')!==-1||response==='<span style=\'display:none\'></span>') {$(this).html('Information not available');}else {self.drawBarsSmall($this);}});});return self.drawBarsSmall($this);},drawBarsSmall:function($this) {var maxVal=0,maxPixels=80,unitPixels=0,txt;$this.find('.medalsN').each(function() {txt=$(this).text();if(parseInt(txt)>maxVal) {maxVal=txt;}});unitPixels=Math.floor(maxPixels / maxVal);if(unitPixels===0) {unitPixels=1;}$this.find('.medalsBar').each(function() {var $_this=$(this),medalVal=$_this.next().text(),barLength=medalVal * unitPixels;if(barLength>maxPixels) {barLength=maxPixels;}$_this.css('width',barLength);});return $this;}};}});window.$core=jQuery.extend({},window.$core,{jCarousel:function($) {$.fn.jCarousel=function(options) {return this.each(function() {$.fn.jCarousel.methods.init($(this),$.extend({},$.fn.carousels.defaults,options));});};$.fn.jCarousel.methods={inner:null,$container:null,$clip:null,opts:null,$timer:null,$child:null,childLength:null,init:function($this,opts) {var self=$.extend({},$.fn.carousels.methods.coreInit($this,opts));self.inner=$.extend({},this);if(self.childLength<2) {if(self.opts.itemFirstInCallback) {self.opts.itemFirstInCallback.apply(self,[self.$ctx,self.$child.eq(0),-1]);}delete self.inner;self=null;return;}self.inner.opts=opts;self.inner.$child=self.$child;self.inner.childLength=self.childLength;self.inner.$container=self.$ctx.closest('.' + self.opts.container);self.inner.$clip=self.$ctx.closest('.' + self.getSelector(self.opts.clip)) ;var datainjectNav=self.$ctx.attr('data-injectnav');if(datainjectNav) {self.opts.injectNav=datainjectNav=='true';}if(self.opts.injectNav) {self.inner.$nav=$('<a href="#prev" class="' + self.opts.hiddenClass + ' ' + self.opts.prev + ' ' + self.getSelector(self.opts.prev) + '" style="display:block;"></a><a href="#next" class="' + self.opts.next + ' ' + self.getSelector(self.opts.next) + '" style="display:block;"></a>').appendTo(self.inner.$container);self.inner.$container.bind('click',function(e) {var _$this=$(e.target);if(_$this.is('.' + self.opts.prev)||_$this.is('.' + self.opts.next)) {e.preventDefault();var carousel=_$this.closest('.' + self.opts.container).find('.' + self.opts.carouselClass);self.inner.move.apply(self,[_$this.is('.' + self.opts.prev),_$this.closest('.' + self.opts.container),carousel]);}_$this=null;});self.inner.setNavigation.apply(self,[self.inner.$container,self.$ctx]);}self.$ctx.data('__jcarousel',self);if(self.opts.initCallback) { self.opts.initCallback.apply(self,[self.$ctx]);}$this.data('__jcarousel',self);return $this;},move:function(prev,container,carousel,isScroll,animateDone,refresh) {var self=this;carousel.stop(true,false);if(refresh) {self.refresh(true);}var idx=carousel.data('actual-idx');if(!idx) { idx=0;}if(!isScroll) {idx += self.opts.scroll * (prev ? -1:1);}(self.inner||self)['setNavigation'].apply(self,[container,carousel,idx]);carousel.data('actual-idx',idx);var $li=self.$child.eq(idx);var posProperty=self.getPosProperty();var liPos=$li.position()[posProperty];var carouselPos=carousel.position()[posProperty];if(Math.abs(carouselPos)===liPos) { return;}var animObj={};animObj[posProperty]='-' + (liPos) + 'px';carousel.animate(animObj,'normal',function() {if(self.opts.itemFirstInCallback&&!isScroll) {self.opts.itemFirstInCallback.apply(self,[$(this),$li,idx]);}if(animateDone) { animateDone.apply(self,[$(this),$li,idx]);}});},scroll:function(index,invokeItemCallback,callback,refresh) {var self=this;var carousel=self.$container.find('.' + self.opts.carouselClass);var actualIdx=carousel.data('actual-idx');carousel.data('actual-idx',index);self.move.apply(self,[actualIdx>index,self.$container,carousel,true,function($this,$li,idx) {if(invokeItemCallback&&self.opts.itemFirstInCallback) {self.opts.itemFirstInCallback.apply(self,[$this,$li,idx]);}if(callback) { callback.apply(self);}},refresh]);},setNavigation:function(container,carousel,idx) {if(typeof (idx)==typeof (undefined)) { idx=carousel.data('actual-idx')||0;}var self=this;self.$prev=self.$prev||container.find('.' + self.opts.prev);self.$next=self.$next||container.find('.' + self.opts.next);if(idx>self.childLength) { idx=self.childLength;}var page=Math.floor(idx / self.opts.scroll) + 1,maxPage=self.childLength / self.opts.scroll;if(maxPage<=1) {self.$prev.add(self.$next).addClass(self.opts.hiddenClass);return;}if(Math.floor(maxPage)<maxPage) {maxPage=Math.floor(maxPage) + 1;}if(page<=1) {self.$prev.addClass(self.opts.hiddenClass);self.$next.removeClass(self.opts.hiddenClass);}else if(page===maxPage) {self.$prev.removeClass(self.opts.hiddenClass);self.$next.addClass(self.opts.hiddenClass);}else {self.$prev.add(self.$next).removeClass(self.opts.hiddenClass);}},prev:function(refresh) {this.__move(true,refresh);},next:function(refresh) {this.__move(false,refresh);},__move:function(prev,refresh) {var self=this;var carousel=self.$container.find('.' + self.opts.carouselClass);self.move.apply(self,[prev,self.$container,carousel,false,false,refresh]);},getPosProperty:function() {return this.opts.horizontal ? 'left':'top';},refresh:function(alsoWidth) {var self=this;if(!self.$ctx) { self.$ctx=self.$container.find('.' + self.opts.carouselClass);}self.$child=self.$ctx.children(self.opts.child).css('float','left').addClass(self.opts.item);self.childLength=self.$child.length;if(self.inner) {self.inner.$child=self.$child;self.inner.childLength=self.childLength;}if(alsoWidth) {if(!self.childSingleWidth) { self.childSingleWidth=self.$child.outerWidth(true);}self.$ctx.width(Math.ceil(self.$child.length * self.childSingleWidth));}}};$.fn.jCarousel.defaults={};},circularCarousel:function($) {$.fn.circularCarousel=function(opts) {return this.each(function() {$.fn.circularCarousel.methods.init($(this),$.extend({},$.fn.carousels.defaults,opts));});};$.fn.circularCarousel.methods={inner:null,init:function($this,opts) {var self=$.extend({},$.fn.carousels.methods.coreInit($this,opts));self.inner=$.extend({},this);self.inner.$child=self.$child.removeClass(opts.hiddenClass);if(self.opts.timed) {self.inner.timed.apply(self,[self.$ctx]);}self.$container=self.$ctx.closest('.' + self.opts.container);if(self.opts.randomStart) {var min=0;var max=self.$child.length - 2;var randomIndex=Math.floor(Math.random() * (max - min + 1)) + min;var randomLeft='-' + randomIndex * self.childSingleWidth + 'px';self.$ctx.css('left',randomLeft);var _childForCssClass=self.inner.$child.eq(randomIndex);if(_childForCssClass.find('div.article').length) {self.$container.removeClass('pr bl or pk');self.$container.addClass(_childForCssClass.find('div.article').parent().attr('class'));}}if(self.opts.injectNav) {if(self.opts.timed) {$nav=$('<div class="jcarousel-control navigator"><a href="#prev" class=" prev ' + self.opts.prev + ' ' + self.getSelector(self.opts.prev) + '" style="display:block;">Previous</a><a href="#playPause" class="btn jcarousel-pause" id="jcarousel-btn-playPause" title="Pause">Pause</a><a href="#next" class=" next ' + self.opts.next + ' ' + self.getSelector(self.opts.next) + '" style="display:block;">Next</a></div>').appendTo(self.$container);}else {$nav=$('<a href="#prev" class=" ' + self.opts.prev + ' ' + self.getSelector(self.opts.prev) + '" style="display:block;">Previous</a><a href="#next" class=" ' + self.opts.next + ' ' + self.getSelector(self.opts.next) + '" style="display:block;">Next</a>').appendTo(self.$container);}self.$container.find('.' + self.opts.prev).bind('click',function(e) {e.preventDefault();self.inner.onPrevClick.apply(self,[$this]);});self.$container.find('.' + self.opts.next).bind('click',function(e) {e.preventDefault();self.inner.onNextClick.apply(self,[$this]);});self.$container.find('#jcarousel-btn-playPause').bind('click',function(e) {e.preventDefault();$thisbutton=$(this);if($thisbutton.hasClass('jcarousel-pause')) {self.inner.onPauseClick.apply(self,[$this]);$thisbutton.html('Play').attr('title','Play');}else {self.inner.timed.apply(self,[$this]);$thisbutton.html('Pause').attr('title','Pause');}$thisbutton.toggleClass('jcarousel-pause jcarousel-play');});}self.inner.$clip=self.$ctx.closest('.' + self.getSelector(self.opts.clip));},move:function(carousel) {var self=this;var idx=carousel.data('actual-idx');if(!idx) { idx=0;}idx++;carousel.data('actual-idx',idx);var left='-=' + self.childSingleWidth + 'px';var newLeft=parseInt(carousel.css('left'),10) - self.childSingleWidth;if(Math.abs(newLeft)>=carousel.outerWidth()) {left='-' + carousel.outerWidth() + 'px';}var childPosition=Math.abs(newLeft / self.childSingleWidth);var _childForCssClass=$(carousel).find(self.opts.child + ':eq(' + (childPosition) + ')');if(_childForCssClass.find('div.article').length!=0) {self.$container.removeClass('pr bl or pk');self.$container.addClass(_childForCssClass.find('div.article').parent().attr('class'));}carousel.animate({ left:left},'normal',function() {var $this=$(this);var _child=$this.find(self.opts.child + ':eq(' + (idx - 1) + ')').clone().appendTo($this);var _parentChild=$this.find(self.opts.child + ':eq(' + (idx) + ')');$this.width($this.outerWidth() + self.childSingleWidth);self.inner.timed.apply(self,[$this]);});},onNextClick:function(carousel) {var self=this;var idx=carousel.data('actual-idx');if(!idx) { idx=0;}idx++;carousel.data('actual-idx',idx);self.inner.onPauseClick.apply(self,[carousel]);var $playStopButton=self.$container.find('#jcarousel-btn-playPause');$playStopButton.html('Play');$playStopButton.removeClass('jcarousel-pause');if(!$playStopButton.hasClass('jcarousel-play')) {$playStopButton.addClass('jcarousel-play');}$playStopButton.attr('title','Play');var left='-=' + self.childSingleWidth + 'px';var newLeft=parseInt(carousel.css('left'),10) - self.childSingleWidth;if(Math.abs(newLeft)>=carousel.outerWidth()) {left='-' + carousel.outerWidth() + 'px';}var childPosition=Math.abs(newLeft / self.childSingleWidth);var _childForCssClass=$(carousel).find(self.opts.child + ':eq(' + (childPosition) + ')');if(_childForCssClass.find('div.article').length!=0) {self.$container.removeClass('pr bl or pk');self.$container.addClass(_childForCssClass.find('div.article').parent().attr('class'));}carousel.animate({ left:left},'normal',function() {var $this=$(this);var _child=$this.find(self.opts.child + ':eq(' + (idx - 1) + ')').clone().appendTo($this);$this.width($this.outerWidth() + self.childSingleWidth);});},onPrevClick:function(carousel) {var self=this;var idx=carousel.data('actual-idx');if(!idx) { idx=0;}idx--;carousel.data('actual-idx',idx);self.inner.onPauseClick.apply(self,[carousel]);var $playStopButton=self.$container.find('#jcarousel-btn-playPause');$playStopButton.html('Play');$playStopButton.removeClass('jcarousel-pause');if(!$playStopButton.hasClass('jcarousel-play')) {$playStopButton.addClass('jcarousel-play');}$playStopButton.attr('title','Play');var _child=carousel.find(self.opts.child + ':eq(' + (self.$child.length - 1) + ')').clone();carousel.prepend(_child);carousel.width(carousel.outerWidth() + self.childSingleWidth);var left='+=' + self.childSingleWidth + 'px';var newLeft=parseInt(carousel.css('left'),10) - self.childSingleWidth;var carouselLeft=parseInt($(carousel).css('left'),10) - self.childSingleWidth;$(carousel).css('left',carouselLeft);var childPosition=Math.abs(newLeft / self.childSingleWidth) - 1;var _childForCssClass=$(carousel).find(self.opts.child + ':eq(' + (childPosition) + ')');if(_childForCssClass.find('div.article').length!=0) {self.$container.removeClass('pr bl or pk');self.$container.addClass(_childForCssClass.find('div.article').parent().attr('class'));}carousel.animate({ left:left},'normal',function() {var $this=$(this);});},onPauseClick:function(carousel) {var self=this;clearTimeout(self.$timer);},timed:function(carousel) {var self=this;self.$timer=setTimeout(function(s) {clearTimeout(s);self.inner.move.apply(self,[carousel]);},self.opts.delay);}}}});(function($) {$.fn.carousels={};$.fn.carousels.methods={opts:null,$ctx:null,$child:null,$timer:null,childSingleWidth:-1,childLength:-1,coreInit:function($this,opts) {var self=this;self.opts=opts;var $list=$this;var isUl=$this.is('ul');if(!isUl) {$list=$this.find('ul:first');}self.$child=$list.find('>' + self.opts.child).filter(function() {return !($(this).find('.summary-wrap').length);}).css('float','left').addClass(self.opts.item);self.childLength=self.$child.length;self.$ctx=$list.addClass(opts.carouselClass).data('actual-idx',0).css({ padding:0,margin:0,top:0,position:'relative'});var property=self.getProperty();if(isUl) {$list.wrap('<div class="' + self.opts.container + ' ' + self.getSelector(self.opts.container) + '" style="position:relative;display:block"><div class="' + self.opts.clip + ' ' + self.getSelector(self.opts.clip) + '" style="position:relative;overflow:hidden;"></div></div>');}else {$this.addClass(opts.container).css({ position:'relative',display:'block'});$list.wrap('<div class="' + self.opts.clip + ' ' + self.getSelector(self.opts.clip) + '" style="position:relative;overflow:hidden;"></div>');}self.childSingleWidth=self.$child.outerWidth(true);$list[property](Math.ceil(self.$child.length * self.childSingleWidth));return self;},refresh:function() {var self=this;self.$child=self.$ctx.children(self.opts.child).css('float','left').addClass(self.opts.item);self.childLength=self.$child.length;if(self.inner) {self.inner.$child=self.$child;self.inner.childLength=self.childLength;}},getSelector:function(elm) {return elm + '-' + (this.opts.horizontal ? 'horizontal':'vertical');},getProperty:function() {return this.opts.horizontal ? 'width':'height';},getPosProperty:function() {return this.opts.horizontal ? 'left':'top';}};$.fn.carousels.defaults={child:'li',carouselClass:'jcarousel-list',clip:'jcarousel-clip',container:'jcarousel-container',hiddenClass:'hidden',timer:null,timed:true,delay:2500,prev:'jcarousel-prev',next:'jcarousel-next',item:'jcarousel-item',horizontal:true,scroll:1,visible:1,randomStart:false,itemFirstInCallback:null,itemLastInCallback:null,initCallback:null,ajaxUrl:null,injectNav:true};}(jQuery));window.$core=jQuery.extend({},window.$core,{vog:function($) {$.fn.vog=function() {return $.fn.vog.methods.init($(this));};$.fn.vog.methods={$ctx:null,$posts:null,$postsHide:null,nPost:0,nPost1:0,nPost2:0,npTxt:'',$vrDiv:null,tm:null,$np:null,$dmore:null,$more:null,$mp:null,init:function(vogContainer) {var self=this;window.vog_ts=new Date().getTime();window.vog_ts_count=0;self.$ctx=vogContainer;self.$vrDiv=$('<div/>');self.refreshVar.apply(self,[vogContainer]),isOldDay=window.location.pathname.indexOf('day=')!==-1;if(!self.tm&&!isOldDay) {self.tm=setTimeout(function(s) {clearTimeout(s);window.location.reload(true);},300000);}var pl=self.$posts.length,pnl=self.$postsHide.length;if(pl>pnl) {self.nPost=pl - pnl;}else {self.nPost=pnl - pl;}self.$mp=vogContainer.find('.vog-mp');self.$np=vogContainer.find('.new-posts');self.$dmore=vogContainer.find('.paged-showmore');self.$more=vogContainer.find('.show-more');if(self.npTxt=='') { self.npTxt=self.$np.text();}if(!isOldDay) {self.ajaxRefresh();}self.$more.bind('click',function() {self.refreshVar.apply(self,[vogContainer]);var y=self.$postsHide.length,j=0;if(y>vog_vps) { y=vog_vps;}self.$postsHide.removeClass('hide');self.refreshVar.apply(self,[vogContainer]);self.nPost=self.$posts.length;if(!self.$postsHide.length) { self.$dmore.addClass('hide');}});if(!self.$postsHide.length) {self=null;return;}self.$dmore.removeClass('hide');},ajaxRefresh:function() {var self=this;setTimeout(function(s) {clearTimeout(s);$.ajax({type:'get',url:'/news/voice-of-the-games/library/_vogAll.html?' + window.vog_ts,dataType:'html',success:function(result) {var _$wrap=$(result).find('.wrapContent');self.nPost1=self.$posts.length;self.nPost2=_$wrap.length;window.vog_ts_count++;if(window.vog_ts_count>=5) {window.vog_ts_count=0;window.vog_ts=new Date().getTime();}if(self.nPost2>self.nPost1) {self.$vrDiv.html('');var i=0,l=(self.nPost2 - self.nPost1),html=[];for (i; i<l; i++) {html.push(_$wrap[i]);}self.$vrDiv.append(html).find('.wrapContent').addClass('hide');self.$np.text((self.nPost2 - self.nPost1) + ' ' + self.npTxt).unbind('click.vog').bind('click.vog',function() {self.$ctx.find('.wrapContent:first').before(html);self.refreshVar.apply(self,[self.$ctx]);self.$postsHide.removeClass('hide');$(this).addClass('hide');self.nPost=self.$posts.length;if(twttr&&twttr.widgets) { twttr.widgets.load();}self.refreshVar.apply(self,[self.$ctx]);}).removeClass('hide');window.vog_ts=new Date().getTime();}else {if(self.nPost2<self.nPost1) {window.location.href=window.location.href;}self.$np.addClass('hide');}delete result;_$wrap=null;self.ajaxRefresh.apply(self);}});},10000);},refreshVar:function(postsContainer) {this.$posts=postsContainer.find('.wrapContent');this.$postsHide=this.$posts.filter('.hide');}}}});window.$core=jQuery.extend({},window.$core,{accSwitcher:function($) {$.fn.accSwitcher=function() {var $this=this,$cookie=localStorage.getItem('acc'),defValue='acc-stdfonts_acc-stdsize';if(!$cookie) {localStorage.setItem("acc",defValue,{ expires:15,path:'/'});$cookie=defValue;}var values=$cookie.split('_'),selectorFont='#' + values[0],selectorSize='#' + values[1];if(selectorFont==='#acc-default') {selectorFont='#acc-stdfonts';}if(selectorSize==='#acc-default') {selectorSize='#acc-stdsize';}$(selectorFont).closest('li').addClass('selected');$(selectorSize).closest('li').addClass('selected');$this.click(function(e) {var $target=$(e.target);if($target.is('span')) {e.preventDefault();var $ul=$target.parents('ul[id]:first');$ul.find('li').removeClass('selected');$target.parents('li:first').addClass('selected');var cookieValues=localStorage.getItem('acc').split('_');var id=e.target.id;if($ul.attr('id').indexOf('fontsize')!==-1) {cookieValues[0]=id;}else if($ul.attr('id').indexOf('styleswitch')!==-1) {cookieValues[1]=id;if(id=="acc-highvisi") {selector="acc-largestfonts";}else {selector="acc-stdfonts";}cookieValues[0]=selector;$('#' + selector).closest('li').closest('ul').find('.selected').removeClass('selected').end().end().addClass('selected');}$('html').removeClass(function(index,classes) {var m=classes.match(/acc-\w+/g)||[];return m.join(" ");}).addClass(cookieValues.join(' '));localStorage.setItem('acc',cookieValues.join('_'),{ expires:15,path:'/'});$target=null;}});$this=null;};},select:function($) {$.fn.select=function(opts) {return $.fn.select.methods.init(this,$.extend({},$.fn.select.defaults,opts));};$.fn.select.methods={change:null,opts:null,__init:null,data:null,$ctx:null,$bC:null,init:function($this,opts) {var self=this;self.opts=opts;self.$ctx=$this;self.$bC=$this.closest('.bC');if(opts.change) {self.change=opts.change;$this.unbind('change.select').bind('change.select',function() {opts.change.apply(self,[this]);});}if(opts.init) { self.__init=opts.init; self.__init.apply(self);}if(!self.opts.defaulValue) { $this.val(self.opts.defaulValue);}return $this;}};$.fn.select.defaults={change:null,init:null,defaulValue:null};},equalHeight:function($) {$.fn.equalHeight=function(opts) {this.each(function() {$.fn.equalHeight.methods.exec($(this),$.extend({},$.fn.equalHeight.defaults,opts));});$('body').css('zoom','1').css('zoom','');};$.fn.equalHeight.methods={exec:function($ctx,opts) {if(opts.excludeSelector&&$ctx.find(opts.excludeSelector).length) { $ctx=null; return;}var self=this,i=opts.selectors.length;while (i) {var selector=opts.selectors[i - 1],$children=$ctx.find(selector);if($children.length<2) { i--; continue;}var $last=$ctx.find('.last');if($last.length>1) {var perRow=$last.eq(0).index();$last.each(function(idx,item) {var maxIdx=perRow,minIdx=0;if(idx>0) {var page=$(item).closest('[class*=page-]').searchCssClass('page-');maxIdx=$(item).index() + (page&&page>1 ? ((page - 1) * perRow) + perRow:0);minIdx=maxIdx - perRow;}if(minIdx>-1) {self.innerExec.apply(self,[$children.slice(minIdx,maxIdx + 1),opts]);}});}else {self.innerExec.apply(self,[$children,opts]);}$last=null;$children=null;i--;}self=null;$ctx=null;},innerExec:function($children,opts) {if(!$children.length) { return;}var maxHeight=-1,self=this;$children.each(function() {var $this=$(this);var th=$this.height();if(th>maxHeight) {maxHeight=th;}});$children.css((opts.toEm ? 'height':'min-height'),(opts.toEm ? ((maxHeight + 3) / 16) + 'em':(maxHeight + 3)));$children=null;self=null;}};$.fn.equalHeight.defaults={selectors:['.gallery-title,.athleteName','.gallery-description,.a_m'],toEm:false};},menu:function($) {$.fn.menu=function(opts) {return $.fn.menu.methods.init(this,$.extend({},$.fn.menu.defaults,opts));};$.fn.menu.methods={$ctx:null,opts:null,init:function($this,opts) {var self=this;if(!$this.length) {self=null;return $this;}self.opts=opts;self.$ctx=$this;self.setItem(document.location.pathname);self=null;},setItem:function(path) {var self=this,noSlashPath=path[path.length - 1]=='/' ? path.substr(0,path.length - 1):path,noIndexPath=path.replace('/index.html',''),trailingSlashPath=path.replace('/index.html','/'),$exactItems=self.$ctx.find('li a[href="' + path + '"]').add(self.$ctx.find('li a[href="' + noIndexPath + '"]')).add(self.$ctx.find('li a[href="' + noSlashPath + '"]')).add(self.$ctx.find('li a[href="' + trailingSlashPath + '"]')).add(self.$ctx.find('li a[href="' + path + (path[path.length - 1]!='/' ? '/':'') + 'index.html"]')).attr('data-found','true'),exactWithVs=[],$vsItems=[];if(path.indexOf('=')!==-1) {exactWithVs=self.$ctx.find('li a[href*="="][data-found="true"]');if(!exactWithVs.length) {$vsItems=self.$ctx.find('li a[href*="="]').filter(function() {var $this=$(this),_ulDom,p=this.parentNode;while (true) {if(p.nodeName&&p.nodeName.toLowerCase()==='ul') { _ulDom=p; break;}p=p.parentNode;}if(_ulDom&&$(_ulDom).find('li a[data-found="true"]').length) { return false;}var href=$this.attr('href');if(href[href.length - 1]=='/') {if(href.indexOf('/index.html')==-1) {href += 'index.html';}}else if(href.indexOf('.html')==-1) { href += '/index.html';}var stripHref=self.stripValueset(href),stripPath=self.stripValueset(path);var result=stripHref==stripPath;if(!result) {result=stripHref==(stripPath + (stripPath[stripPath.length - 1]==='/' ? '':'/') + 'index.html');}return result;});self.setDataFound($vsItems);}}var $itemsWithScore=[],_host='http:/' + '/' + window.location.host,$ulFound=self.$ctx.find('li a[data-found="true"]').closest('ul'),ullength=$ulFound.length;self.$ctx.find('li a[href!="#"]').each(function(i) {var $this=$(this),href=this.getAttribute('href'),th=href.substring(1),tp=path.substring(1);if(th.indexOf('/')===-1) {$this=null;return;}if(th.substring(0,th.indexOf('/'))!==tp.substring(0,tp.indexOf('/'))) {$this=null;return;}if(!(href&&href.length)) {$this=null;return;}href=href.replace(_host,'');if(href.indexOf('http:\/\/')===0) {$this=null;return;}if(ullength) {var _isSameUl=false,_ulDom,p=this.parentNode;while (true) {if(p.nodeName&&p.nodeName.toLowerCase()==='ul') { _ulDom=p; break;}p=p.parentNode;}p=null;$ulFound.each(function() {if(_isSameUl) {$this=null;return;}if(this===_ulDom) { _isSameUl=true;}});if(_isSameUl) {_ulDom=null;$this=null;return;}_ulDom=null;}if(href[href.length - 1]==='/') {if(href.indexOf('/index.html')===-1) {href += 'index.html';}}else if(href.indexOf('/index.html')===-1) { href += '/index.html';}if(href.indexOf('{')!==-1) {$this=null;return;}if(href===path) {self.setDataFound($this);$this=null;return;}var urlParts=path.split('/'),l=urlParts.length,hrefParts=href.split('/'),hl=hrefParts.length;if(urlParts[l - 1]==='') {urlParts[l - 1]='index.html';}if(hl>l) {$this=null;return;}if(hrefParts[hl - 1]==='') {hrefParts[hl - 1]='index.html';}var arrObj=self.getItem(urlParts,hrefParts);if(!arrObj.found&&arrObj.hasVs&&!exactWithVs.length) {arrObj=self.getItem(urlParts,hrefParts,true);if(arrObj.found) {$itemsWithScore.push({ item:$this,score:arrObj.score});}}found=arrObj.found;if(arrObj.found) {$itemsWithScore.push({ item:$this,score:arrObj.score});}arrObj=null;});$itemsWithScore=$itemsWithScore.length>1 ? $itemsWithScore.sort(function(a,b) {var aScore=a.score,bScore=b.score;return bScore - aScore;}):($itemsWithScore.length==1 ? $itemsWithScore:[]);var $itemsScore=[];if($itemsWithScore.length>1) {var $itemMaxScore=$itemsWithScore[0].item,i;$itemsScore.push($itemMaxScore[0]);var il=$itemsWithScore.length;for (i=0; i<il; i++) {var _$item=$itemsWithScore[i].item;if(_$item.closest('ul').is($itemMaxScore.closest('ul'))) {continue;}$itemsScore.push(_$item[0]);}}else if($itemsWithScore.length==1) {$itemsScore.push($itemsWithScore[0].item[0]);}var $parent=$exactItems.add($vsItems).add($itemsScore).closest("li"),$alias=!$parent.length ? self.$ctx.find('li a[alias]'):[],dataRel=self.getDataRel($exactItems,$vsItems,$itemsScore,$alias),drl=dataRel.length;if(drl) {while (drl + 1) {var dr=dataRel[drl - 1];$parent=$parent.add(self.$ctx.find('li a[href="' + dr + '"]').add(self.$ctx.find('li a[href="' + dr + '/"]')).add(self.$ctx.find('li a[href="' + dr + 'index.html"]')).closest('li'));drl--;}}$parent.not(self.opts.excludeSelector).addClass(self.opts.currentClass);$ulFound=null;$parent=null;$alias=null;$itemsScore=null;$itemsWithScore=null;$vsItems=null;self=null;},getDataRel:function() {var dataRel=[],i,l=arguments.length,i2,l2,dr;if(!l) { return dataRel;}for (i=0; i<l; i++) {$.each(arguments[i],function() {dr=$(this).closest('li').attr('data-rel');if(dr) {dr=dr.split('|');l2=dr.length;for (i2=0; i2<l2; i2++) {dataRel.push(dr[i2]);}}});}dr=null;return dataRel;},setDataFound:function($item) {$item.attr('data-found','true');$item=null;},getItem:function(urlParts,hrefParts,replaceVs) {var self=this,result={ found:false,hasVs:false,score:-1},hl=hrefParts.length,newHref=hrefParts.join('/');if(replaceVs&&newHref.indexOf('=')!==-1) {newHref=self.stripValueset(hrefParts);}var newPath=urlParts.join('/');if(replaceVs&&newPath.indexOf('=')!==-1) {newPath=self.stripValueset(urlParts);}var hasVs=newPath.indexOf('{'),tHref=newHref + (newHref.indexOf('.htm')==-1 ? '/index.html':'');while (newPath.length) {var tPath=newPath + (newPath.indexOf('.htm')==-1 ? '/index.html':'');if(tHref===tPath) {result.found=true;result.score=lidx;self=null;return result;}var lidx=newPath.lastIndexOf('/');if(lidx===-1) {self=null;return result;}newPath=newPath.substr(0,lidx);}result.hasVs=hasVs;self=null;return result;},stripValueset:function(href) {if(typeof (href)!=='string') {href=href.join('/');}if(href.indexOf('=')===-1) { return href;}var pattern=/([\w\d\s\-]*)=[\w\d\s\-]*/i,vs=href.match(pattern);if(!vs.length) { return href;}return href.replace(vs[0],'{' + vs[1] + '}');}};$.fn.menu.defaults={currentClass:'current',excludeSelector:null};},jWatch:function($) {$.fn.jWatch=function(msTimer) {$.fn.jWatch.methods.calc(this,msTimer||60000);};$.fn.jWatch.methods={calc:function(ctx,msTimer) {var self=this,dt=new Date(),hour=dt.getUTCHours() + 1,suffix='AM',isPm=false,minutes=dt.getUTCMinutes(),firstTimer=msTimer,ms=dt.getUTCSeconds() * 1000;if(hour>12) {hour=hour - 12;isPm=true;suffix='PM';}if(hour<10) {hour=('0' + hour);}if(minutes<10) {minutes='0' + minutes;}if(firstTimer>ms) {firstTimer=firstTimer - ms;}if(window.__jwatch) { clearTimeout(window.__jwatch);}window.__jwatch=setTimeout(function() {self.calc.apply(self,[ctx,msTimer]);ctx=null;self=null;},firstTimer);ctx.html(hour + ':' + minutes + ' ' + suffix);}};},jCountdown:function($) {$.fn.jCountdown=function(opts) {return $.fn.jCountdown.methods.init(this,$.extend({},$.fn.jCountdown.defaults,opts));};$.fn.jCountdown.methods={one_day:86400000,init:function($this,opts) {if(!opts.startDate) {var olympic=$this.searchCssClass('olympic-');if(!olympic) { return;}var isOlympic=olympic=='true';opts.startDate=isOlympic ? Date.UTC(2012,6,27,20,0,0):Date.UTC(2012,7,29,19,30,0);}var self=this,actualDt=new Date(),nowmsec=Date.UTC(actualDt.getFullYear(),actualDt.getUTCMonth(),actualDt.getUTCDate(),actualDt.getUTCHours(),actualDt.getUTCMinutes(),actualDt.getUTCSeconds(),actualDt.getUTCMilliseconds()),diffTicks=(opts.startDate - nowmsec)>0 ? opts.startDate - nowmsec:0,diffDays=diffTicks / this.one_day,diffFloorDays=Math.floor(diffDays),diffHours=(diffDays - diffFloorDays) * 24,diffFloorHours=Math.floor(diffHours),diffMinutes=(diffHours - diffFloorHours) * 60,diffFloorMinutes=Math.floor(diffMinutes),diffSeconds=60 - actualDt.getSeconds();diffSeconds=diffSeconds>0 ? diffSeconds:60;self.$dd=$('.jcountdown-dd',$this);self.$hh=$('.jcountdown-hh',$this);self.$mm=$('.jcountdown-mm',$this);self.setTimer.apply(self,[diffFloorDays,diffFloorHours,diffFloorMinutes + 1,diffSeconds * 1000]);self=null;},setTimer:function(actualDays,actualHours,actualMinutes,timeout) {var self=this;if(window.__jctm) { clearTimeout(window.__jctm);}window.__jctm=setTimeout(function() {var newMinute=actualMinutes - 1,newHour=actualHours,newDays=actualDays;if(newMinute<0) {newHour--;newMinute=59;}if(newMinute===60) {newHour--;newMinute=0;}if(newHour<0) {newDays--;newHour=23;}if(newHour==24) {newHour=0;newDays++;}self.setTimer.apply(self,[newDays,newHour,newMinute]);self=null;},timeout||60000);if(actualMinutes===60) { actualMinutes=0; actualHours--;}if(actualHours<0) { actualHours=23; actualDays--;}var padDay=(actualDays>=100 ? actualDays:(actualDays>=10 ? '0' + actualDays:'00' + actualDays)) + '',padHour=(actualHours>=10 ? actualHours:'0' + actualHours) + '',padMinute=(actualMinutes>=10 ? actualMinutes:'0' + actualMinutes) + '',arrDay=padDay.split(''),l=arrDay.length,_html='',i=0;for (i; i<l; i++) {_html += ['<span class="digit',(i==l - 1 ? ' last':''),'">',arrDay[i],'</span>'].join('');}self.$dd.html(_html);_html='';var arrHour=padHour.split('');l=arrHour.length;for (i=0; i<l; i++) {_html += ['<span class="digit',(i==l - 1 ? ' last':''),'">',arrHour[i],'</span>'].join('');}self.$hh.html(_html);_html='';var arrMinute=padMinute.split('');l=arrMinute.length;for (i=0; i<l; i++) {_html += ['<span class="digit',(i==l - 1 ? ' last':''),'">',arrMinute[i],'</span>'].join('');}self.$mm.html(_html);}};$.fn.jCountdown.defaults={startDate:null};},jTabs:function($) {$.fn.jTabs=function(opts) {var href=window.location.href;return this.each(function() {$.fn.jTabs.methods.init($(this),$.extend({},$.fn.jTabs.defaults,opts),href);});};$.fn.jTabs.methods={opts:null,$contents:null,$items:null,$ctx:null,init:function($ctx,opts,href) {var $items=$ctx.find('.' + opts.tabs.itemClass),tabsLength=$items.length;if(tabsLength===0) { return $ctx;}var self=this,arrValueset=self.getValueset(href),vsLength=arrValueset ? arrValueset.length:0,vsValues=[],idxCurrent=-1,tabCurrentClass=opts.tabs.currentClass;self.opts=opts;self.$items=$items;if(vsLength) {$items.each(function(idx) {var $this=$(this),isCurrent=$this.hasClass(tabCurrentClass),_$title=$(opts.tabs.titleSelector,this),dataVs=_$title.attr('data-vs');if(dataVs) {var values=dataVs.split('|');var valuesL=values.length,i2=0;for (i2; i2<valuesL; i2++) {if(isCurrent) { break;}var vs=values[i2],i=0;for (i; i<vsLength; i++) {var keypair=arrValueset[i].split('=');if(keypair[0]!==vs) {continue;}isCurrent=true;vsValues.push([keypair[1],'/' + keypair.join('=') + '/']);break;}}if(idxCurrent>-1&&vsLength>1) { isCurrent=false;}}if(isCurrent) {idxCurrent=idx;}});}if(idxCurrent===-1) { idxCurrent=0;}self.$contents=$ctx.find(opts.tabs.contentSelector).attr('tabindex','-1').addClass(opts.hiddenClass);self.$contents.eq(idxCurrent).attr('tabindex','').removeClass(opts.hiddenClass);var $currents=$ctx.find('.' + tabCurrentClass),currentLength=$currents.length,valuesLength=vsValues.length,i=valuesLength;while (i) {var keypair=vsValues[i - 1],$opt=self.$contents.find('option[value="' + keypair[0] + '"]');if($opt.length) { $opt.attr('selected','selected');}$opt=self.$contents.find('option[value*="' + keypair[1] + '"]');if($opt.length) { $opt.attr('selected','selected');}i--;}var wrapClass='.' + opts.tabs.itemClass,currentClass=opts.currentClass;if(!currentLength) {$ctx.find('li:first').addClass(tabCurrentClass);}else {$currents.removeClass(tabCurrentClass);$items.eq(idxCurrent).addClass(tabCurrentClass);}if(opts.live||$ctx.attr('data-live')==='1') {var _$ctx=(opts.parentSelector ? $(opts.parentSelector):$ctx.parent());jQuery.data($ctx[0],'__self',self);_$ctx.on('click',opts.liveSelector,function(e) {var _self=jQuery.data(this,'__self');self.onClick.apply(_self,[$(this),e]);});}else {jQuery.data($ctx[0],'__self',self);$ctx.unbind('click.jtabs').bind('click.jtabs',function(e) {var _self=jQuery.data(this,'__self');if(_self) { _self.onClick.apply(_self,[$(this),e]);}});}self=null;return $ctx;},onClick:function($ctx,e) {var self=this,target=e.target,$target=$(target),$parent=$target.parent();if(!$target.is('a')) {$target=$target.closest('a');$parent=$target.parent();}if(!($target.is('a')&&$parent.is('.' + self.opts.tabs.itemClass))) { return true;}var ref=$target.attr('href')||$target.attr('data-ref')||$target.attr('rel');if(!ref) { return true;}if(ref.indexOf('http:')!=-1) {ref=ref.substr(ref.indexOf('#'));}$.fn.jTabs.selectedRef=ref;$ctx.find(self.opts.tabs.contentSelector).addClass(self.opts.hiddenClass).filter(ref).removeClass(self.opts.hiddenClass);$ctx.find('.' + self.opts.tabs.itemClass).removeClass(self.opts.currentClass);$parent.addClass(self.opts.currentClass);e.preventDefault();},getValueset:function(href) {var pattern=/([\w]*=[\w-]*)/gi;return href.match(pattern);}};$.fn.jTabs.defaults={tabs:{ ulClassPrefix:'tab-',currentClass:'current',itemClass:'tabItem',wrapSelector:'.tabWrap',titleSelector:'.tabTitle',contentSelector:'.tabContent'},currentClass:'current',hiddenClass:'hidden',live:false,parentSelector:null,liveSelector:null};},changeRedirect:function($) {$.fn.changeRedirect=function() {var $this=this,pathname=document.location.pathname;newpath=pathname.lastIndexOf('/')==pathname.length ? pathname + 'index.html':(pathname.indexOf('index.html')==-1 ? pathname + '/index.html':pathname),i=0;$this.find('option[value="' + pathname + '"],option[value="' + newpath + '"]').attr('selected','selected');$this.bind('change',function(e) {var url=$(this).find('option:selected')[0].getAttribute('value'),matches=url.match(/({[\w]*})/gi),ml;if(matches&&(ml=matches.length)) {for (i=ml; i>0; i--) {var m=matches[i - 1];if(!m.length) { continue;}var stripm=m.replace('{','').replace('}',''),parts=pathname.split('/'),pl=parts.length,i2;for (i2=pl; i2>0; i2--) {var p=parts[i2 - 1];if(!p.length) { continue;}if(p.indexOf(stripm + '=')!==0) {continue;}url=url.replace(m,p);break;}}}if(url) {window.location=url;}return false;});$this=null;};},buttonExpander:function($) {$.fn.buttonExpander=function(opts) {return $.fn.buttonExpander.methods.init(this,$.extend({},$.fn.buttonExpander.defaults,opts));};$.fn.buttonExpander.methods={opts:null,$ctx:null,init:function($this,opts) {var self=this;self.opts=opts;self.$ctx=$this;if(opts.elementToExpand!=null&&$(opts.elementToExpand).length!=0) {$this.unbind().bind('click',function(e) {var _this=$(this);_this.closest('.jcarousel').height('auto');var _elToExpand=_this.closest('.newsComment').find(opts.elementToExpand).toggle();if(!_elToExpand.is(':visible')) { _this.html('Expand to read more');}else { _this.html('Click to collapse the text');}e.preventDefault();});}self=null;return $this;}};$.fn.buttonExpander.defaults={elementToExpand:null,textElementOpened:'Click to collapse the text',textElementClosed:'Expand to read more'};},zebraTable:function($) {$.fn.zebraTable=function(options) {return $.fn.zebraTable.methods.init(this,$.extend({},options));};$.fn.zebraTable.methods={init:function($this,opts) {var $ctx=$this,$tbl=$ctx;if(!$ctx.is('table')) {$tbl=$ctx.find('table');}$tbl.find('tr:odd').addClass("odd").end().find('tr:even').addClass("even");if($tbl.is(".sortable")) {execIfExists($tbl,'tablesorter',{headers:{0:{ sorter:false},1:{ sorter:false},2:{ sorter:false}},widgets:['zebra']});}$ctx=null;$tbl=null;}};},minLength:function($) {$.fn.minLength=function(opts) {return this.each(function() {$.fn.minLength.methods.init($(this),$.extend({},$.fn.minLength.defaults,opts));});};$.fn.minLength.methods={init:function($this,opts) {$this.bind('click',function(e) {var tmpSearchText=$(this).parent().find(opts.txtSelector).val();if(tmpSearchText.length<opts.minLength) {alert(opts.errMessage);e.preventDefault();}});}};$.fn.minLength.defaults={txtSelector:'.searchText',errMessage:'Please insert at least three characters in the search field',minLength:3};},publicationsSort:function($) {$.fn.publicationsSort=function() {return $.fn.publicationsSort.methods.init(this);};$.fn.publicationsSort.methods={$dataWrap:null,init:function($this) {var self=this;self.$dataWrap=$('#publicationsList');var parts=window.location.href.replace('#','').split('/');if(parts[parts.length - 1].indexOf('.htm')!==-1) {parts=parts.splice(0,parts.length - 1);}var baseurl=parts.join('/') + '/library/_latest-',_isAsc=null,_lib=null,sortOrder=null;return $this.bind('click',function(e) {e.preventDefault();$this.removeClass('selected');var _$this=$(this).addClass('selected');_isAsc=_$this.hasClass("asc");_lib=_$this.attr('id').toLocaleLowerCase().indexOf('title')!=-1 ? 'title':'theme';sortOrder=_isAsc ? 'desc':'asc';var url=_lib + '-' + sortOrder + '.html';switch (_isAsc) {case true:_$this.removeClass('asc').addClass('desc');break;default:_$this.removeClass('desc').addClass('asc');break;}self._load.apply(self,[$this,_lib + sortOrder,baseurl + url]);});},_load:function($sort,key,_url) {var self=this;var storedVal=$sort[key];if(storedVal&&storedVal.length>0) {self.$dataWrap.html(storedVal);return;}$.ajax({type:"get",url:_url,success:function(result) {self.$dataWrap.html(result);$sort[key]=result;},error:function() {}});}};},external:function($) {$.fn.external=function() {var host=window.location.host||window.location.hostname,$o=this,$f=$o.not('.internal,.external,.twitter-share-button,.twitter-follow-button').filter(function() {var href=this.getAttribute('href');if(!href) { return false;}if(href.indexOf('http')!==-1) { return false;}var exthost=href.match(/http[s]?:\/\/[\w\d\.\-]*/gi);if(!(exthost&&exthost.length)) { return false;}var basehost=exthost[0].split('/');return host!==(basehost[basehost.length - 1]);}).addClass('external');$o.not('.ldn-popup,.internal,[target="_self"]').bind('click',function(e) {e.preventDefault();var title=this.title.replace(/ /g,"").replace(/-/g,"").replace(/–/g,"").replace(/_/g,"").replace(/'/g,"").replace(/\(/g,"").replace(/\)/g,"");try {var w=window.open(this.href,title);}catch (err) {document.location=this.href;}w.focus();});$o=null;$f=null;};},preloadPhoto:function($) {$.fn.preloadPhoto=function(opts) {var emptySrc=(opts&&opts.emptySrc)||'/imgml/void.png';return this.find('img').each(function() {return $.fn.preloadPhoto.exec.apply(this,[emptySrc]);});};$.fn.preloadPhoto.exec=function(emptySrc) {var img=this;var imgPreloader=new Image(),src=img.src;imgPreloader.onload=function() {if(imgPreloader.width===1&&imgPreloader.height===1) {img.src=emptySrc;}imgPreloader.onload=function() {};img=null;imgPreloader=null;};imgPreloader.src=src;};},convertMeasure:function($) {$.fn.convertMeasure=function() {var measure=localStorage.getItem('orpCommon_convert');if(!measure) { return this;}return this.each(function(idx) {var $this=$(this),v=this.innerHTML;if(v&&v!=='-') {if($this.hasClass('or-h-conv')) {var cm,ft,inch;if(measure==='metric') {if(!$this.data('metric_h')) {$this.data('metric_h',v);}else {this.innerHTML=$this.data('metric_h');}}else if(measure==='imperial') {$this.data('metric_h',v);cm=parseFloat(v.substr(0,4)) * 100;ft=Math.round(cm / 30.48);inch=parseInt((cm % 30.48) / 12,10);this.innerHTML=ft + '\' ' + (inch + (inch<10 ? '0':'')) + '\'\'';}}else if($this.hasClass('or-w-conv')) {if(measure==='metric') {if(!$this.data('metric_w')) {$this.data('metric_w',v);}else { this.innerHTML=$this.data('metric_w');}}else if(measure==='imperial') {var kg=parseFloat(v.split(' ')[0]);this.innerHTML=parseInt(kg / 0.45359237) + ' lbs';$this.data('metric_w',v);}}else if($this.hasClass('or-s-conv')) {if(measure==='metric') {if(!$this.data('metric_s')) {$this.data('metric_s',v);}else { this.innerHTML=$this.data('metric_s');}}else if(measure==='imperial') {var values=v.split(' '),d=parseFloat(values[0].replace(',','.'));this.innerHTML=(d / 0.621371192).toFixed(2) + ' mph';$this.data('metric_s',v);}}else if($this.hasClass('or-d-conv')) {if(measure==='metric') {if(!$this.data('metric_d')) {$this.data('metric_d',v);}else { this.innerHTML=$this.data('metric_d');}}else if(measure==='imperial') {var values=v.split(' '),d=parseFloat(values[0].replace(',','.')),type=values[1];if(window.use_km||(type&&type.toLowerCase()==='km')) {this.innerHTML=((d * 1000) / 1609.344).toFixed(2) + ' mi';window.use_km=true;}else if(!window.use_km) {this.innerHTML=((d / 1609.344) * 5280).toFixed(2) + ' ft';}$this.data('metric_d',v);}}}$this=null;});};},toggleVisibility:function($) {$.fn.toggleVisibility=function() {return this.unbind('click.toggle').bind('click.toggle',function(e) {e.preventDefault();var $this=$(this);var elemToToggle=$this.parent().find(".related");if(!elemToToggle.length) { return;}var $tagList=$this.closest('.tagList');$tagList.find('.related:visible').not(elemToToggle).hide();$(elemToToggle).toggle();$this.toggleClass('down-arrow up-arrow');});};},forceHref:function($) {$.fn.forceHref=function() {var href=window.location.href,hashIdx=href.indexOf('#');if(hashIdx==-1) { return this;}href=href.substr(0,hashIdx);var path=window.location.pathname;return this.unbind('click.forcehref').bind('click.forcehref',function() {var $this=$(this);var origUrl=$this.attr('href');var iHashIdx=origUrl.indexOf('#');if(iHashIdx==-1) { return true;}var url=origUrl.substr(0,iHashIdx);if(url.indexOf('http:\/\/')!=-1&&url==href) {window.location.href=origUrl;window.location.reload(true);}else if(url==path) {window.location.href=origUrl;window.location.reload(true);}});};},openPopupWindow:function($) {$.fn.openPopupWindow=function() {var $this=$(this),_dataAttr=$this.attr('data-attr'),_params='scrollbars=no,menubar=no,toolbar=no,resizable=no',_url=$this.attr('href');if(_dataAttr!==null&&_dataAttr.length) {_params += _dataAttr;}$this.click(function(e) {e.preventDefault();window.open(_url,'smartAgent',_params);});$this=null;};},goThrough:function($) {$.fn.goThrough=function() {return this.unbind('click.gothrough').bind('click.gothrough',function() {window.location.href=$(this).attr('data-href');});};},videoPlayerEmbed:function($) {$.fn.videoPlayerEmbed=function() {var id=$(this).attr("id");if(id!==undefined&&id.indexOf("_")>0) {var values=id.split("_");var programmeId=values[0];var playersize=values[1];var url="http://players.mediafreedom.twofourdigital.net/locog/script/config.js?id=" + programmeId;if(playersize=='large') {width=700;height=480;}else {width=448;height=307;}var flashvars={config:url,autostart:"true"};var params={allowscriptaccess:"always",allowFullscreen:"true",opacity:"transparent",quality:"high",align:"middle",wmode:"transparent"};var attributes={id:'flashPlayer',name:'flashPlayer'};swfobject.embedSWF("http://players.mediafreedom.twofourdigital.net/swf/player.swf","videoplayer",width,height,"10.0.42.34","/swf/expressinstall.swf",flashvars,params,attributes);}};},countryAthletesfilters:function($) {$.fn.countryAthletesfilters=function(opts) {return $.fn.countryAthletesfilters.methods.init(this,$.extend({},$.fn.countryAthletesfilters.defaults,opts));};$.fn.countryAthletesfilters.methods={opts:null,$ctx:null,$list:null,$itemsCount:null,init:function($this,opts) {var self=this;self.$ctx=$this;self.opts=opts;self.$list=$(opts.listWrap);self.$itemsCount=$(opts.itemsCount);self.$rbFilters=self.$ctx.find(opts.rbFilters).bind('click',function() {var $this=$(this);var value=$this.val();self.resetFilters.apply(self,['gender']);if(value=='all') {self.clearFilter.apply(self);self=null;return;}self.applyFilter.apply(self,['.g-',value]);});self.$initials=self.$ctx.find(opts.initialWrap).bind('click',function(e) {var $target=$(e.target);if(!$target.is('a')) { return true;}$target.addClass(opts.currentClass);e.preventDefault();var value=$target.text().toLowerCase();self.resetFilters.apply(self,['initials']);if(value=='all') {self.clearFilter.apply(self);self=null;return;}self.applyFilter.apply(self,['.i-',value]);});self.$discFilter=self.$ctx.find(opts.discFilter).bind('change',function(e) {e.preventDefault();var value=$(this).val();self.resetFilters.apply(self,['discipline']);if(!value) {self.clearFilter.apply(self);self=null;return;}self.applyFilter.apply(self,['.d-',value]);});self.$freeText=self.$ctx.find(opts.freeTextWrap).find('a').bind('click',function(e) {e.preventDefault();var value=$(this).parent().find('input').val();self.resetFilters.apply(self,['freetext']);if(!value) {self.clearFilter.apply(self);self=null;return;}self.applyFilter.apply(self,['[class*="f-' + value + '"]','']);}).end().find('input');self.$rbDefault=self.$rbFilters.find('gender-default');self.$initialsDefault=self.$initials.find('initial-default');self.$discDefault=self.$discFilter.find('option:first');self.resetFilters.apply(self);self=null;return $this;},clearFilter:function() {var self=this;self.$list.find('li.' + self.opts.hiddenClass).removeClass(self.opts.hiddenClass);self.$itemsCount.text(self.opts.itemsText + ' ' + self.$list.find('li').length);self=null;},applyFilter:function(selector,value) {var self=this;self.$list.find('li' + selector + value).removeClass(self.opts.hiddenClass);self.$list.find('li:not(' + selector + value + ')').addClass(self.opts.hiddenClass);self.$itemsCount.text(self.opts.itemsText + ' ' + self.$list.find('li:not(.' + self.opts.hiddenClass + ')').length);self=null;},resetFilters:function(notFilter) {var self=this;if(notFilter!='freetext') {self.$freeText.val('');}if(notFilter!='gender') {self.$rbFilters.find('input[checked]').attr('checked','');self.$rbDefault.attr('checked','checked');}if(notFilter!='initials') {self.$initials.find('a').removeClass(self.opts.currentClass);self.$initialsDefault.addClass(self.opts.currentClass);}if(notFilter!='discipline') {self.$discFilter.find('option[selected]').attr('selected','');self.$discDefault.attr('selected','selected');}self=null;}};$.fn.countryAthletesfilters.defaults={rbFilters:'.genderFilters input[type="radio"]',freeTextWrap:'.freeTextAthletesSearch',initialWrap:'#alphaFilters',discFilter:'#athletefilterSport',listWrap:'#wrapAthletesList',itemsCount:'.athletesTotalNumber',itemsText:"Total number of athletes",hiddenClass:'hidden',currentClass:'current'};},radioSetup:function($) {$.fn.radioSetup=function() {var name="rdb-freetext";var results=new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);if(!results) {return 0;}if(results[1]==='c') {$('.ftr_contains input').attr('checked',true);$('.ftr_starts input').attr('checked',false);}else {$('.ftr_contains input').attr('checked',false);$('.ftr_starts input').attr('checked',true);}};},setCurrentItem:function($) {$.fn.setCurrentItem=function(opts) {return $.fn.setCurrentItem.methods.init(this,$.extend({},$.fn.setCurrentItem.defaults,opts));};$.fn.setCurrentItem.methods={opts:null,init:function($this,opts) {var self=this;self.opts=opts;var idLi="";if($this.attr("id")!=undefined) { idLi=$this.attr("id").replace(self.opts.scope,"item");}var current=$("#lcg-left li.current");if($("#" + idLi).length!=0) {if(current.length!=0) { current.removeClass("current").addClass("sub");}$("li#" + idLi).addClass("current");}if(current.length!=0&&$("#lcg-left li.current ul").length!=0) { current.addClass("sub");}self=null;return $this;}};$.fn.setCurrentItem.defaults={scope:'mnu-link'};},tabCordion:function($) {$.fn.tabCordion=function(opts) {return $.fn.tabCordion.methods.init(this,$.extend({},opts));};$.fn.tabCordion.methods={init:function($ctx,opts) {var self=this,$tabCordion=$ctx.find('.tabcordion'),$tabsNav=$ctx.find('.tabs-nav');self.bindClick($ctx,$tabCordion,$tabsNav,opts);self.initNoItem($ctx,$tabCordion,$tabsNav);$ctx.find('li').removeClass('current');$tabCordion.addClass('hidden');if($('.tab-live .liveData,.tab-live .hpLive').length) {$ctx.find('.tabLive').addClass('current');$ctx.find('.tab-live').removeClass('hidden');}else if($('.tab-next .liveData').length) {$ctx.find('.tabNext').addClass('current');$ctx.find('.tab-next').removeClass('hidden');}else if($('.tab-res .liveData').length) {$ctx.find('.tabRes').addClass('current');$ctx.find('.tab-res').removeClass('hidden');}self.reinitVisible($ctx);if(!opts.isHp) {self.timedRefresh($ctx,$tabCordion,$tabsNav,opts);}$ctx=null;$tabCordion=null;$tabsNav=null;self=null;opts=null;},timedRefresh:function($ctx,$tabCordion,$tabsNav,opts) {var self=this;setTimeout(function(s) {clearTimeout(s);var path=opts.isHp ? '/library/home/accordion/':($ctx.attr('data-seo') ? '/disciplines/discipline=' + $ctx.attr('data-seo') + '/library/home/':'');if(!path.length) {self=null;$ctx=null;$tabCordion=null;$tabsNav=null;opts=null;return;}self.reloadAsync($ctx,path + '_next-events.html','.tab-next');self.reloadAsync($ctx,path + '_on-now.html','.tab-live');self.reloadAsync($ctx,path + '_results.html','.tab-res',function() {self.bindClick($ctx,$tabCordion,$tabsNav,opts);self.reinitNoItem($ctx,$tabCordion,$tabsNav);self.reinitVisible($ctx);self.timedRefresh($ctx,$tabCordion,$tabsNav,opts);self=null;$ctx=null;$tabCordion=null;$tabsNav=null;opts=null;});},30000);},bindClick:function($ctx,$tabCordion,$tabsNav,opts) {$ctx.find('.tabNext,.tabLive,.tabRes').unbind('click.tabcordion').bind('click.tabcordion',function(e) {e.preventDefault();var $target=$(e.target),selector='.tab-next';if($target.is('a')||$target.is('span')) {$target=$target.closest('li');}$tabsNav.find('.current').removeClass('current');$target.addClass('current');if($target.hasClass('tabLive')) { selector='.tab-live';}if($target.hasClass('tabRes')) { selector='.tab-res';}$tabCordion.addClass('hidden');$(selector).removeClass('hidden');$target=null;});if(opts.isHp) {$ctx.find(".tabLive").unbind('click.tabcordionhp').bind('click.tabcordionhp',function() {$('.tabcordion-wrap.hp').find('div.more').addClass('hidden');$('.box.m.sport').addClass('live');});$ctx.find(".tabNext,.tabRes").unbind('click.tabcordionhp').bind('click.tabcordionhp',function() {$('.tabcordion-wrap.hp').find('div.more').removeClass('hidden');$('.box.m.sport').removeClass('live');});}$ctx=null;opts=null;},reloadAsync:function($ctx,path,selector,cb) {$.get(path,function(data,txtStatus,xhr) {$ctx.find(selector).html(data);if(xhr) {xhr.onreadystatechange=null;xhr.abort=null;xhr=null;}delete data;$ctx=null;if(cb) { cb.call();}});},reinitVisible:function($ctx) {var $visible=$ctx.find('li:visible');if($visible.length===1) {var txt=$visible.find('a').html();if(txt) {$visible.html('<span class="only-visible">' + txt + '</span>');txt=null;}}else if($visible.length>1) {$visible.find('.only-visible').each(function() {var $v=$(this),_txt=$v.text();$v.parent().html('<a href="#">' + _txt + '</a>');_txt=null;$v=null;});}$visible=null;$ctx=null;},initNoItem:function($ctx,$tabCordion,$tabsNav) {$tabCordion.find('.noItem').each(function() {var $this=$(this);if($this.closest('.tab-res').length) {$ctx.find('.tabRes,.tab-res').hide();}if($this.closest('.tab-next').length) {$ctx.find('.tabNext,.tab-next').hide();$tabsNav.find('.current').removeClass('current');$ctx.find('.tabRes').addClass('current');$tabCordion.addClass('hidden');$ctx.find('.tab-res').removeClass('hidden');}if($this.closest('.tab-live').length) {$ctx.find('.tabLive,.tab-live').hide();$tabsNav.find('.current').removeClass('current');$ctx.find('.tabNext').addClass('current');}else {$tabsNav.find('.current').removeClass('current');$ctx.find('.tabLive').addClass('current');$tabCordion.addClass('hidden');$ctx.find('.tab-live').removeClass('hidden');}$this=null;});$ctx=null;$tabsNav=null;$tabCordion=null;},reinitNoItem:function($ctx,$tabCordion,$tabsNav) {var $current=$tabsNav.find('.current'),altSelector=$current.is('.tabNext') ? '.tabRes':'.tabNext';$tabCordion.find('.noItem').each(function() {var $this=$(this);if($this.closest('.tab-res').length) {$ctx.find('.tabRes,.tab-res').hide();}if($this.closest('.tab-next').length) {$ctx.find('.tabNext,.tab-next').hide();$tabCordion.addClass('hidden');$ctx.find('.tab-res').removeClass('hidden');}if($this.closest('.tab-live').length) {$ctx.find('.tabLive,.tab-live').hide();}$this=null;});if($current.is(':hidden')) {$current.removeClass('current');$current=$tabsNav.find('.tabLive');if($current.is(':hidden')) {$tabsNav.find(altSelector).addClass('.current');}else {$current.removeClass('current');}}$ctx=null;$tabsNav=null;$tabCordion=null;$current=null;}};},liveHeader:function($) {$.fn.liveHeader=function() {$.fn.liveHeader.methods.init(this);};$.fn.liveHeader.methods={init:function($ctx) {var self=this;window.liveOpened='liveOpened' in window ? window.liveOpened:false;self.bindClick($ctx);self.asyncLoad($ctx,true);self=null;$ctx=null;},bindClick:function($ctx) {$('#anch-events-live').unbind('click.liveheader').bind('click.liveheader',function(e) {e.preventDefault();$(this).parent().find('.evt-flyOut').toggle();window.liveOpened=!window.liveOpened;});},reload:function($ctx) {var self=this;self.bindClick($ctx);setTimeout(function(s) {clearTimeout(s);self.asyncLoad($ctx);self=null;$ctx=null;},30000);},asyncLoad:function($ctx,isFirst) {var self=this;$.get('/live/library/_liveheader.html',function(data,txtStatus,xhr) {var $data=$(data),html='';if(window.liveOpened) {$data.find('.evt-flyOut').show();}if(!isFirst) {$data.find('.live-n,.ath').show();}$data.each(function() {html += '<div class="row">' + this.innerHTML + '</div>';});$ctx.html(html);if(isFirst) {$ctx.find('.live-n,.ath').fadeIn(400);}if(xhr) {xhr.onreadystatechange=null;xhr.abort=null;xhr=null;}delete data;self.reload($ctx);self=null;$ctx=null;$data=null;$div=null;});dt=null;}};}});(function($) {$.fn.outerHtml=function() {return this[0].outerHTML||new XMLSerializer().serializeToString(this[0]);};}(jQuery));(function($) {$.fn.searchCssClass=function(pattern,config) {if(!this.length) { return undefined;}var cfg=$.extend({},$.fn.searchCssClass.defaults,config),o=this[0],cls=o.className.split(' ');if(!cls.length) { return undefined;}if(cls[0].indexOf(pattern)===0) { return $.fn.searchCssClass.retrieveValue(cls[0],cfg);}var i=cls.length;while (i) {var cl=cls[i - 1];if(cl.indexOf(pattern)===0) { return $.fn.searchCssClass.retrieveValue(cl,cfg);}i--;}cfg=null;return undefined;};$.fn.searchCssClassList=function(pattern,config) {var cfg=$.extend({},$.fn.searchCssClass.defaults,config);var i=this.length;var result=[];while (i) {var o=this[i - 1];var cls=o.className.split(' ');var i2=cls.length;if(!i2) { continue;}if(cls[0].indexOf(pattern)===0) { result.push($.fn.searchCssClass.retrieveValue(cls[0],cfg));}while (i2) {var cl=cls[i2 - 1];if(cl.indexOf(pattern)===0) { result.push($.fn.searchCssClass.retrieveValue(cl,cfg));}i2--;}}cfg=null;return result;};$.fn.searchCssClass.defaults={splitChar:'-',index:1,rawVal:false};$.fn.searchCssClass.retrieveValue=function(value,config) {if(config.rawVal) { return value;}return value.split(config.splitChar)[config.index];};}(jQuery));window.execIfExists=function(object,pluginName,pluginOpts,windowProp) {if(!object) { return;}var w=this,$o,type=(typeof (object)).toString().toLowerCase();switch (type) {case 'string':$o=$(object);break;case 'object':if(!object.jquery) {$o=$(object);}else { $o=object;}break;default:$o=object;break;}if(!$o.length) { w=null; $o=null; return;}if(typeof (pluginName)===typeof (function() {})) {pluginName.apply($o);w=null;$o=null;return;}if(pluginName in w.$core&&!w.$core[pluginName].lazyInit) {w.$core[pluginName].lazyInit=true;w.$core[pluginName](jQuery);}if(!pluginName in $.fn) { w=null; $o=null; return;}if(pluginName in $o) {$o[pluginName](pluginOpts);}else if(w.console) {w.console.error(pluginName + ':not found!!');}if(windowProp) { w[windowProp]=$o;}$o=null;w=null;return;};(function($) {$.execIfExists=function(object,pluginName,pluginOpts,windowProp) {window.execIfExists(object,pluginName,pluginOpts,windowProp);};}(jQuery));var $doc=document,countDownOpts={};if($doc.getElementById('torchrelay-oly')) {countDownOpts.startDate=Date.UTC(2012,6,27,20,0,0);}else if($doc.getElementById('torchrelay-para')) {countDownOpts.startDate=Date.UTC(2012,7,24,7,0,0);}execIfExists('.jcountdown','jCountdown',countDownOpts);countDownOpts=null;execIfExists('.js-watch','jWatch');execIfExists('.tabcordion-wrap.hp','tabCordion',{ isHp:true});execIfExists($doc.getElementById('photoGallery'),'jPhotogallery',{visibleThumbs:6,onItemSet:function(movement) {var self=this;if(!self.carousel) {self.queue.apply(self,['onItemSet',movement]);self=null;return;}var itemsCount=self.opts.visibleThumbs,page=Math.floor(self.actualIdx / itemsCount) + 1;if(page!=self.$ctx.data('actual-page')) {self.$ctx.data('actual-page',page);self.pause();var idx=(itemsCount * (page - 1)),__c=self.carousel.data('__jcarousel');if(__c) {__c.inner.scroll(idx,null,function() {self.timedPlay();self=null;});}}execIfExists(".lcg-toggle-visibility",'toggleVisibility');},onPreInit:function() {var self=this;self.$itemsCarousel=$('#items-carousel');self.isLazyLoading=self.$itemsCarousel.attr('data-count')!=null&&self.$itemsCarousel.attr('data-href')!=null;self=null;},onInit:function(initCallback) {var self=this;self.$ctx.data('actual-page',1);var dataCount=self.$itemsCarousel.attr('data-count')||-1,dataHref=self.$itemsCarousel.attr('data-href'),totItems=self.$itemsCarousel.find('li').length,sizeCallback=function(tot,callback) {execIfExists(self.$itemsCarousel,'jCarousel',{scroll:6,visible:self.opts.visibleThumbs,itemFirstInCallback:function(carousel,li,index) {if(index<0) { index=0;}if(!self.carousel) {self.carousel=$.extend({},carousel);if(self.dequeue.apply(self,['onItemSet'])) {return;}}var itemsCount=self.opts.visibleThumbs;var page=Math.floor(index / itemsCount) + 1;if(page!=self.$ctx.data('actual-page')) {self.$ctx.data('actual-page',page);self.onNavigate.apply(self,[true,self.carousel.children('.jcarousel-item:eq(' + index + ')')]);}}},'$galleryCarousel');self.carousel=$.extend({},window.$galleryCarousel);var page=Math.floor(self.actualIdx / totItems) + 1;if(self.actualIdx>0&&self.carousel.data('__jcarousel')&&page!=self.$ctx.data('actual-page')) {self.carousel.data('__jcarousel').inner.scroll(self.actualIdx);}if(callback) { callback.apply(this);}};if(dataCount&&dataHref) {var lazyItems=[];$.ajax({type:'get',dataType:'json',url:dataHref,success:function(items) {var idx,item,basepath;for (idx in items) {item=items[idx];if(!item) { continue;}basepath=['/mm',item.bp,'/',item.id].join('');lazyItems.push(['<li data-seo="',item.seo,'" class="jlazy item-',item.id,' gallery-single-item"><a data-fullscreen="',[basepath,'_MFULL.jpg'].join(''),'" href="',[basepath,'_M01.jpg'].join(''),'"><span class="top-bar">&nbsp;</span><img width="90" height="63" src="',[basepath,'_M05.jpg'].join(''),'"/></a></li>'].join(''));}self.$itemsCarousel.append(lazyItems.join(''));totItems=dataCount||totItems;self.setItems();self.initCallback.apply(self);self.onNavigate.apply(self,[0]);sizeCallback.apply(self,[totItems,function() {this.$itemsWrapUl.fadeIn('slow');}]);},error:function() { sizeCallback.apply(self,[totItems]);}});}else { sizeCallback.apply(self,[totItems]);}},onItemNotFound:function() {var self=this;if(self.carousel&&self.carousel.data('__jcarousel')) { self.carousel.data('__jcarousel').refresh();}}});window.jcarouselCfg={scroll:1,visible:1,initCallback:function(carousel) {var self=this,ajaxUrl=self.opts.ajaxUrl;carousel.data('actual-page',1).find('li.hidden').removeClass('hidden');var $box=carousel.closest('.jcarousel-container').parent();if(!$box.length) { $box=carousel.closest('.bC');}var _control=$box.next('.jcarousel-control'),$placeholder=carousel.find('.page-placeholder');if(!_control.length) { _control=$box.find('.jcarousel-control');}if($placeholder.length) { $placeholder.replaceWith('');}var pages=_control.find('.sliderNav').find('.slide').length;_control.find('.prev').addClass('jcarousel-prev-disabled').end().bind('click',function(e) {var $target=$(e.target);var $b=$(this).prev('.jcarousel-container');if(!$b.length) { $b=$(this).parent().find('.jcarousel-container');}var $c=$b.find('.' + self.opts.carouselClass),$parent;if($target.hasClass('prev')) {e.preventDefault();var actualPage=$c.data('actual-page'),page=actualPage - 1,$newPage=$c.find('.page-' + page);if(ajaxUrl&&!($newPage.length&&$newPage.text().length>0)) {$.ajax({ type:'get',url:ajaxUrl + page,success:function(data) {if(data.length>0) {$c.find('.page-placeholder,.page-' + page).replaceWith('');$c.find('.page-' + actualPage).before(data);$c.append('<li class="page-placeholder"/>');$c.data('__jcarousel').inner.prev(true);}}});}else {if(page>=1) {$c.data('__jcarousel').inner.prev();$parent=$target.parent();$parent.find(".current").removeClass("current");$parent.find("li.slide").eq(carousel.last - 1).addClass("current");$c.data('actual-page',$c.data('actual-page') - 1);}else {page=pages;$parent=$target.parent();$parent.find(".current").removeClass("current");$parent.find("li.slide").eq(0).addClass("current");$c.data('actual-page',1);}}$c.data('offset-top',window.$scrollable.scrollTop());}else if($target.hasClass('next')) {e.preventDefault();var actualPage=$c.data('actual-page'),page=actualPage + 1,$newPage=$c.find('.page-' + page);if(ajaxUrl&&!($newPage.length&&$newPage.text().length>0)) {$.ajax({ type:'get',url:ajaxUrl + page,success:function(data) {if(data.length>0) {$c.find('.page-placeholder,.page-' + page).replaceWith('');$c.find('.page-' + actualPage).after(data);if(page<pages) {$c.append('<li class="page-placeholder"/>');}$c.data('__jcarousel').inner.next(true);}}});}else {if(page<=pages) {$c.data('__jcarousel').inner.next();$parent=$target.parent();$parent.find(".current").removeClass("current");$parent.find("li.slide").eq(carousel.last - 1).addClass("current");$c.data('actual-page',$c.data('actual-page') + 1);}else {page=pages;$parent=$target.parent();$parent.find(".current").removeClass("current");$parent.find("li.slide").last().addClass("current");$c.data('actual-page',$parent.find("li.slide").length);}}$c.data('offset-top',window.$scrollable.scrollTop());}else if($target.is('a')) {e.preventDefault();var actualPage=$c.data('actual-page'),newPage=parseInt($target.text().replace("item","").replace(" ",""),10),$newPage=$c.find('.page-' + newPage);if(ajaxUrl&&!($newPage.length&&$newPage.text().length>0)) {var maxIdx=newPage>actualPage ? newPage:actualPage,minIdx=newPage<actualPage ? newPage:actualPage,$lastFound=[];for (minIdx + 1; minIdx<maxIdx; minIdx++) {if($c.find('.page-' + minIdx).length) {continue;}$c.find('.page-' + (minIdx - 1)).after('<li class="page-' + minIdx + '"><div class="torchbearersWrap"/></li>');}$.ajax({ type:'get',url:ajaxUrl + newPage,success:function(data) {$c.find('.page-placeholder,.page-' + newPage).replaceWith('');$c.find('.page-' + (newPage - 1)).after(data);if(newPage<pages) {$c.append('<li class="page-placeholder"/>');}$c.data('__jcarousel').inner.scroll(newPage - 1,true,null,true);}});}else {$c.data('__jcarousel').inner.scroll(newPage - 1,true);}$parent=$target.parent();$parent.parent().find(".current").removeClass("current");$parent.addClass("current");$c.data('actual-page',newPage);$c.data('offset-top',window.$scrollable.scrollTop());}$target=null;$b=null;});carousel.bind('keydown',function(e) {var code=e.keyCode||e.which;if(!(code==9)) { return;}var $this=$(this),$activeElement=$(document.activeElement),$activeParent=$activeElement.parents('.jcarousel-item:first'),_page=$activeParent.searchCssClass('page-');if(!_page) {$this=null;$activeElement=null;$activeParent=null;return;}_page=parseInt(_page,10);carousel.data('actual-idx',_page - 1);var actualPage=$this.data('actual-page');if(actualPage<_page) {var domA=carousel.find('.page-' + actualPage).find('a[id*="page-' + actualPage + '"]')[0];if(domA) { domA.focus();}}var $m04=$activeElement.parents('.m_04');var idx=$m04.index();var maxIdx=$activeParent.find('.m_04').length;var $b=$this.closest('.jcarousel-container').parent();if(!$b.length) { $b=$this.closest('.bC');}var $carouselControl=$b.next('.jcarousel-control');if(!$carouselControl.length) { $carouselControl.find('.jcarousel-control');}var $prev=$carouselControl.find('.prev');var $next=$carouselControl.find('.next');if(idx==maxIdx&&!e.shiftKey) {var _length=$this.find('.jcarousel-item').length;_page=_page + 1;if(_page>_length) { return;}e.preventDefault();$carouselControl.find(".current").removeClass("current");$carouselControl.find("li.slide").eq(_page - 1).addClass("current");if(_page==1) { $prev.addClass("jcarousel-prev-disabled");}if(_page>1) { $prev.removeClass("jcarousel-prev-disabled");}if(_page==_length) { $next.addClass("jcarousel-prev-disabled");}if(_page<_length) { $next.removeClass("jcarousel-prev-disabled");}carousel.data('__jcarousel').inner.scroll(_page - 1,true);}if(idx<=0&&e.shiftKey&&_page>1) {_page=_page - 1;if(_page<0) { return;}e.preventDefault();$carouselControl.find(".current").removeClass("current");$carouselControl.find("li.slide").eq(_page - 1).addClass("current");if(_page==1) { $prev.addClass("jcarousel-prev-disabled");}if(_page>1) { $prev.removeClass("jcarousel-prev-disabled");}if(_page==_length) { $next.addClass("jcarousel-prev-disabled");}if(_page<_length) { $next.removeClass("jcarousel-prev-disabled");}carousel.data('__jcarousel').inner.scroll(_page - 1,true);}$this.data('actual-page',_page);$this.data('offset-top',null);$this.data('keydown',true);$this=null;$activeElement=null;$activeParent=null;});},itemFirstInCallback:function(carousel,li,index) {var $box=carousel.closest('.jcarousel-container').parent();if(!$box.length) { $box=carousel.closest('.bC');}if(carousel.data('actual-page')>1) { index=carousel.data('actual-page');}if(carousel.data('keydown')) {var domA=carousel.find('.page-' + index).find('a[id*="page-' + index + '"]')[0];if(domA) {domA.focus();var offsetTop=carousel.data('offset-top');if(offsetTop) {window.$scrollable.scrollTop(offsetTop);}domA=null;}}var $control=$box.next('.jcarousel-control');if(!$control.length) { $control=$box.find('.jcarousel-control');}var $prev=$control.find('.prev'),$next=$control.find('.next');if(index==-1) {$prev.add($next).addClass("jcarousel-prev-disabled");$control.addClass('hidden');$control=null;$prev=null;$next=null;$box=null;carousel=null;return;}if(index<=1) { $prev.addClass("jcarousel-prev-disabled");}if(index>1) { $prev.removeClass("jcarousel-prev-disabled");}if(index>=this.childLength) {$next.addClass("jcarousel-prev-disabled");carousel.data('__jcarousel').inner.scroll(this.childLength - 1);}if(index<this.childLength) { $next.removeClass("jcarousel-prev-disabled");}var $sliderNavList=$next.parent().find(".sliderNav").find("li").removeClass("current"),idx=index - 1;if(idx<0) { idx=0;}$sliderNavList.eq(idx).addClass("current");$control=null;$prev=null;$next=null;$box=null;$sliderNavList=null;carousel=null;},injectNav:false};window.jcarouselSingleCfg={scroll:1,visible:1,initCallback:function(carousel) {var dataAttr=carousel.attr('data-attr');if(dataAttr&&dataAttr.length>0) {switch (dataAttr) {case 'no-bg':carousel.data('parent-bg',carousel.parent().css('background-image'));carousel.parent().parent().find('.jcarousel-next,.jcarousel-prev').bind('click',function() {$(this).parent().find('.jcarousel-clip').css('background-image','none');});break;}}carousel.find('li.hidden').removeClass('hidden');carousel=null;},itemLastInCallback:function(carousel) {var dataAttr=carousel.attr('data-attr');if(dataAttr&&dataAttr.length>0) {switch (dataAttr) {case 'no-bg':if(carousel.data('parent-bg')) {carousel.parent().css('background-image',carousel.data('parent-bg'));}break;}}carousel=null;}};window.jcarousel2Cfg={scroll:2,visible:2,initCallback:function(carousel) {carousel.list.find('li.hidden').removeClass('hidden');carousel=null;}};execIfExists('.field',function() {this.each(function() {var __this=this;var $this=$(__this);var default_value=__this.value;$this.focus(function() {var _this=this;if(_this.value===default_value) {_this.value='';}_this=null;}).blur(function() {var _this=this;if(_this.value==='') {_this.value=default_value;}_this=null;});$this=null;__this=null;});});execIfExists('.tabcordion-wrap','tabCordion');execIfExists('#schedule_gridWrap,#schedule_listWrap,.timeTable','schedule');execIfExists('#overall_eventMedallists,.famousOlympians','zebraTable');execIfExists('.bC','equalHeight');execIfExists('.equalHeights','equalHeight',{ selectors:['.bH','.bC']});execIfExists('.b-tabs','equalHeight',{ selectors:['.tabContent']});execIfExists('.newsHp','equalHeight',{ selectors:['.cols-2>li']});execIfExists('.eventsEqualHeights ','equalHeight',{ selectors:['.listGender ul']});execIfExists($doc.getElementById('countriesAthletesFilters'),'countryAthletesfilters');execIfExists('#lcg-sm-form',function() {this.validate();jQuery.extend(jQuery.validator.messages,{required:"Required field",email:"Please insert a correct email address"});});execIfExists(".or-legend-swith>.sw",function() {this.bind('click',function(e) {e.preventDefault();var _wrap=$(this).closest('.or-legend-wrap');_wrap.find(".sw").toggleClass('hide');_wrap.find(".or-legend-content").toggleClass('show');_wrap=null;});});execIfExists('.publications-sort','publicationsSort');execIfExists('.torchBearerPhoto','preloadPhoto');execIfExists($doc.getElementById('communityByRegionfilterRegion'),'select',{change:function(domThis) {var region=$(domThis).find('option:selected').val();ajaxUrltoCall='/torch-relay/' + region + '/library/_getCommunity.html';$.ajax({type:"get",url:ajaxUrltoCall}).success(function(xml) {var selectedRegionSeoName=$(domThis).children("option:selected").val();$('#communityByRegionfilterCommunity').empty().append(xml).removeAttr('disabled');});return false;}});if(window.addthis) {addthis.init();}if($('.lb-posts').length) {execIfExists('.lb-posts:not(.lb-widget)','vog');execIfExists('.vog_widget','tinyscrollbar',{},'$vogwidget');updateTwitterScrollbar();}execIfExists('#athlete_surname_search','radioSetup');execIfExists('#athlete_surname_search,#btnFreeText,#btnPubCode','minLength');execIfExists('.videoPlayerWrapper','videoPlayerEmbed');execIfExists('.or-h-conv,.or-w-conv,.or-d-conv,.or-s-conv','convertMeasure');execIfExists('.vert-tab','menu',{ currentClass:'or-current'});if($.orpCommon) {var $orevent=$('#or-event');$orevent.find('.or-starttime').each(function() {this.removeAttribute('title');});execIfExists($doc.getElementById('or-eventNavContainer'),'tubeNav');execIfExists($orevent,'phaseNavMenu');$orevent=null;execIfExists($doc.getElementById('or-phaseContainer'),'setAthleteLazyImages');execIfExists('.eventInfoRecords','goThrough');execIfExists('.scoreProg','ShowTimeline');execIfExists('.or-livestop',function() {var $this=this;if($.orpCommon.isStopped()) {var $a=$this.find('a').text('Play');$a.closest('li').toggleClass('pause play');$a=null;}$this.bind('click',function(e) {var $target=$(e.target),txt='Play';e.preventDefault();if($.orpCommon.isStopped()) {$.orpCommon.refresh();txt='Pause';}else {$.orpCommon.stop();}$target.text(txt);$target.closest('li').toggleClass('pause play');$target=null;});$this=null;});execIfExists('.or-convertmeasure',function() {var $this=this,_convert=localStorage.getItem('orpCommon_convert');if(_convert) {$this.find('.current').removeClass('current').end().find('.' + _convert).addClass('current');}$this.bind('click',function(e) {e.preventDefault();var $target=$(e.target),convert=undefined;if($target.is('.current')) { return;}if($target.is('.metric')) {convert='metric';}else if($target.is('.imperial')) {convert='imperial';}if(!convert) { return;}$(this).find('.current').removeClass('current');$target.addClass('current');localStorage.setItem('orpCommon_convert',convert);execIfExists('.or-h-conv,.or-w-conv,.or-d-conv,.or-s-conv','convertMeasure');$target=null;});$this=null;});var $orpToggle=$('.or-toggle,.or-expandall');if($orpToggle.length&&!($orpToggle.toggleLoadData&&$orpToggle.toggleLoadData.isInit)) {$orpToggle.toggleLoadData();}$orpToggle=null;$.override('AthleteExpansion.onGetAJContent',function(s) {if($.fn.jTabs) {var $tabs=$('.sbContainer,#tt-match-wrapper').find('.jtabs').add(s.find('.jtabs')),ref=$.fn.jTabs.selectedRef,$parent,$items;if(ref) {$items=$tabs.find('.tabItem');$parent=$items.find('>a[href="' + ref + '"]').parent();$tabs.find('.tabContent').addClass('hidden').filter(ref).removeClass('hidden');$items.removeClass('current');$parent.addClass('current');}$parent=null;$tabs=null;}s=null;});$.override('AthleteExpansion.onSwapHtml',function(div) {execIfExists('.eventInfoRecords','goThrough');execIfExists(div.find('.jtabs'),'jTabs');execIfExists(div.find('.scoreProg'),'ShowTimeline');execIfExists(div.find('.timeline').find('li'),'tooltip',{isInner:true,cSelector:'.tt',ajaxHref:false,position:'bc',lazyLoadImg:true,cssClass:'timeline-tooltip'});execIfExists(div.find('.or-h-conv,.or-w-conv,.or-d-conv,.or-s-conv'),'convertMeasure');div=null;});}setTimeout(function(t) {clearTimeout(t);execIfExists('#lcg-lev0menu,#lcg-lev2menu','superfish',{},'$menus');if(!window.$menus) { window.$menus=$();}execIfExists(window.$menus.add('#lcg-lev3menu'),'menu',{ excludeSelector:'.sportHub'});execIfExists('.top-live','liveHeader');execIfExists('.mnu-link','setCurrentItem');var $photoreader=$doc.getElementById('photoReader');if($photoreader) {var opts={};if($photoreader.className.indexOf('newsReader')>-1) {opts={ autoplay:true,dataCfg:{ selector:'#frame ',ajaxUrl:'/_news/library/article={0}/photo.html'}};}execIfExists($photoreader,'jPhotoReader',opts);opts=null;$photoreader=null;}execIfExists('.overall_medals','medalStandings');execIfExists('.historicalMedals','historicalMedalStandings');execIfExists($doc.getElementById('overall_medallists'),function() {if(!$doc.getElementById('rdbAll')) { return;}var $overall_medallists=this,$tbody=$overall_medallists.find('tbody'),count=50,pagedHiddenClass='paged-hidden',$paged=$overall_medallists.closest('.paged'),$itemsToPage;if(!$paged.length) {$overall_medallists=null;$tbody=null;$paged=null;return;}count=parseInt(($paged.attr('data-count')||count),10);$itemsToPage=$tbody.find('tr:gt(' + (count - 1) + ')');if($itemsToPage.length) {$tbody.find('tr:lt(' + count + ')');$itemsToPage.addClass(pagedHiddenClass);$paged.find('.paged-showmore').removeClass('hidden').bind('click',function(e) {e.preventDefault();$tbody.find('tr.' + pagedHiddenClass + ':lt(' + count + ')').removeClass(pagedHiddenClass);if(!$tbody.find('tr.' + pagedHiddenClass + ':lt(' + count + ')').length) {$(this).addClass('hidden');}});}lastFilter=undefined;$("#rdbAll,#rdbMen,#rdbWomen").click(function() {var $this=$(this),filter=$this.is('#rdbWomen') ? '.filter-w':($this.is('#rdbMen') ? '.filter-m':''),$items=$tbody.find('tr:not(.' + pagedHiddenClass + ')'),newCount=$items.length;if(lastFilter===filter) { return;}$items.addClass(pagedHiddenClass);$tbody.find('tr.' + pagedHiddenClass + filter + ':lt(' + newCount + ')').removeClass(pagedHiddenClass);});$itemsToPage=null;$paged=null;$overall_medallists=null;});execIfExists('.lbPhotoItem','forceHref');execIfExists($doc.getElementById('mascot-carousel'),'circularCarousel',{ injectNav:true,timed:false,randomStart:true});execIfExists('#related-Carousel,#article-Carousel,.jcarousel-single-simple,#venue-Carousel','jCarousel',window.jcarouselSingleCfg);execIfExists(".jcarousel","jCarousel",window.jcarouselCfg);execIfExists(".jcarousel-double","jCarousel",window.jcarousel2Cfg);execIfExists(".lcg-toggle-visibility",'toggleVisibility');},50);setTimeout(function(t) {clearTimeout(t);execIfExists('.athlete_photo_tooltip,.oldtorch','tooltip',{isInner:true,cSelector:'span',ajaxHref:false,position:'tr',lazyLoadImg:true});execIfExists('.timeline li','tooltip',{isInner:true,cSelector:'.tt',ajaxHref:false,position:'bc',lazyLoadImg:true,cssClass:'timeline-tooltip'});execIfExists('#publicFunders-Carousel,#commercialPartners-Carousel','circularCarousel',{ injectNav:false});execIfExists('.bar','tooltip',{isInner:true,cSelector:'div,span',ajaxHref:false});execIfExists('.tbl-toggle',function() {this.bind('click',function(e) {var $this=$(this),selector=$this.attr('href'),$elm=$('.' + selector.substring(1));if(!$elm.length) {$elm=$(selector);}$elm=$elm.closest('.or-medals');$toggle=$('#related-' + (selector.substr(1)));if(!$elm.length) {$elm=$(selector);}if($toggle.length) {if(!$toggle.data('copied')) {$toggle.html('<td colspan="6">' + $elm.html() + '</td>');$toggle.data('copied',true);}}else {$toggle=$elm;}$toggle.toggleClass('hidden');$this.toggleClass('or-plus or-minus');var html='+';if($this.hasClass('or-minus')) { html='-';}$this.html('<span>' + html + '</span>');e.preventDefault();$toggle=null;$this=null;$elm=null;});});execIfExists('.overall_medalist','medallists');execIfExists($doc.getElementById('medalsCompare'),'medalsCompare');},100);window.preupdatecount=3;function updateTwitterScrollbar() {if(!window.$vogwidget) { return;}var ms=50;if(window.preupdatecount<0) { ms=10000;}window.preupdatecount--;window.$vogwidget.tinyscrollbar_update('relative');setTimeout(function(t) {clearTimeout(t);updateTwitterScrollbar();},ms);}setTimeout(function(t) {clearTimeout(t);execIfExists('.jtabs','jTabs');execIfExists('a[href^="http"],.external','external');execIfExists($doc.getElementById('lcg-accLinks'),'accSwitcher');execIfExists('#atthevenuefilterLocation,#atthevenuefilterSport','select',{change:function($this) {var _sport=$("#atthevenuefilterSport").val();var _venue=$('#atthevenuefilterLocation').val();var _url="/spectators/venues/library/";if(_venue.length>0) { _url += ("location=" + _venue + "/");}if(_sport.length>0) { _url += ("discipline=" + _sport + "/");}_url += "_venueslist.html";if(location.pathname.indexOf("/paralympics")==0) { _url="/paralympics" + _url;}$.ajax({type:"get",url:_url,success:function(result) {$('#venuesList').replaceWith(result);},error:function() {}});return false;},defaulValue:""});execIfExists($doc.getElementById('galleryfilterSport'),'select',{change:function(domThis) {var optValue=domThis.value;if(!optValue.length) { return;}var self=this,seoName="",start=optValue.indexOf("discipline="),stop=0;if(start!=-1) {start=optValue.indexOf("=",start);stop=optValue.indexOf("/",start);seoName=optValue.substring((start + 1),stop);}var $iconSelect=$('#iconSelect').html(optValue).removeClass().addClass('discIcon ' + seoName);$.ajax({type:"get",url:optValue,success:function(result) {var $row=self.$bC.find('.row:eq(1)');if(!$row.length) {$row=$('<div class="row"></div>').appendTo(self.$bC);}$row[0].innerHTML=result.length ? result:'';execIfExists($row.find('.jcarousel'),'jCarousel',window.jcarouselCfg);execIfExists($row,'equalHeight');},error:function() {}});},init:function() {var discref=$('#discref').html(),$iconSelect=$('#iconSelect');if(!$iconSelect.length) {$iconSelect=$('<div id="iconSelect"></div>').insertAfter(this.$ctx);}$iconSelect.html(discref).removeClass().addClass('discIcon ' + discref);this.$ctx.find('option[value *="=' + discref + '/"]').attr('selected','selected');delete this.$ctx;}});execIfExists($doc.getElementById('broadcastersfilterCountry'),'select',{change:function($this) {if($this.value===""||self.data===null||self.data===undefined) { $this=null; return false;}var myObject=$.parseJSON(data);if(myObject.root.country.length===0) { return false;}var inner="",exit=false;$.each(myObject.root.country,function(i,_country) {if(_country.seoname!=undefined&&_country.seoname.toLowerCase()==$this.value.toLowerCase().replace(' ','')&&_country.broadcaster!=undefined) {if(Object.prototype.toString.call(_country.broadcaster)==='[object Array]') {$.each(_country.broadcaster,function(j,broadcaster) {inner += "<li>";if(broadcaster.url!=undefined) {if(Object.prototype.toString.call(broadcaster.url)==='[object Array]') {inner += "<ul>";$.each(broadcaster.url,function(k,url) {inner += "<li>";inner += "<a href='";inner += url;inner += "' title='";inner += broadcaster.name;inner += "' class='external' tabindex='-1' target='_blank'>";inner += broadcaster.name;inner += "</a>";inner += "</li>";});inner += "<ul>";}else {inner += "<a href='";inner += broadcaster.url;inner += "' title='";inner += broadcaster.name;inner += "' class='external' tabindex='-1' target='_blank'>";inner += broadcaster.name;inner += "</a>";}}else {inner += broadcaster.name;}inner += "</li>";exit=true;});}else {inner += "<li>";if(_country.broadcaster.url!=undefined) {if(Object.prototype.toString.call(_country.broadcaster.url)==='[object Array]') {inner += "<ul>";$.each(_country.broadcaster.url,function(k,url) {inner += "<li>";inner += "<a href='";inner += url;inner += "' title='";inner += _country.broadcaster.name;inner += "' class='external' tabindex='-1' target='_blank'>";inner += _country.broadcaster.name;inner += "</a>";inner += "</li>";});inner += "<ul>";}else {inner += "<a href='";inner += _country.broadcaster.url;inner += "' title='";inner += _country.broadcaster.name;inner += "' class='external' tabindex='-1' target='_blank'>";inner += _country.broadcaster.name;inner += "</a>";}}else {inner += _country.broadcaster.name;}inner += "</li>";exit=true;}}return !exit;});if(inner.length!==0) {inner="<ul>" + inner + "</ul>";}else {inner="No broadcaster found for the country you selected";inner="<span>" + inner + "</span>";}if($("#broadcastersContainer").length===0) {$("#" + $this.id).after("<div id='broadcastersContainer'>" + inner + "</div>");}else { $("#broadcastersContainer").html(inner);}return false;},init:function() {$.ajax({url:"/spectators/library/_broadcasterlist.html",success:function(data) {self.data=data;},error:function(jqXHR,textStatus,errorThrown) { return false;}});}});execIfExists('.lbWrap','jLightbox',{autoplay:false,wrap:'<div id="jquery-lightbox" class="galleryView #{hiddenClass}"><div id="lightbox-wrap"><a id="lightbox-nav-landing" href="#landing" tabindex="1"></a><div id="lightbox-title"></div><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="__jLightbox-image"/></div><div id="lightbox-loading"><a href="#loading" id="lightbox-loading-link"><img src="#{imageLoading}"/></a></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><div id="lightbox-image-details-caption"></div></div></div></div></div><a href="#prev" id="lightbox-nav-btnPrev" class="gallery-nav-btn" tabindex="4">Previous</a><a href="#next" id="lightbox-nav-btnNext" class="gallery-nav-btn" tabindex="5">Next</a><div id="lightbox-nav"><div class="navWrap"><div class="full"><a id="lightbox-full" tabindex="3">Full gallery</a></div><div class="arrows"><a href="#play-pause" id="lightbox-nav-btnPlayPause" tabindex="6">Play</a></div><div class="pages"><span id="lightbox-image-details-currentNumber"></span></div></div></div><a href="#close" id="__jLightbox-close" tabindex="2">Close</a></div></div>',excludesFromClick:'#lightbox-nav-btnPlayPause',onInit:function() {var self=this;self.$playPause=$('#lightbox-nav-btnPlayPause').removeClass(self.opts.disabledClass).bind('click',function(e) {e.preventDefault();var $this=$(this);if($this.hasClass(self.opts.disabledClass)) { return;}var $self=self.$document.data('active-self');$this.toggleClass('jlightbox-pause');if(($self.paused=$this.hasClass('jlightbox-pause'))) {self.pause.apply();$this.html("Stop");}else {$self.timedPlay.apply($self);$this.html('Play');}$self.$innerWrap.data('paused',$self.paused);$this=null;$self=null;});self.pause.apply(self);},onSpacebarKey:function() {var self=this;if(self.$activeElement.is(self.$playPause)) {var $this=self.$playPause;$this.toggleClass('jlightbox-pause');if((self.paused=$this.hasClass('jlightbox-pause'))) {self.pause.apply(self);$this.html('Stop');}else {self.timedPlay.apply(self);$this.html('Play');}self.$innerWrap.data('paused',self.paused);$this=null;}self=null;},onClick:function() {var self=this;self.$playPause.removeClass('jlightbox-pause');self.timedPlay.apply(self);self=null;},onAfterImageSet:function() {var self=this;self.$wrap.find('div.summary-wrap').replaceWith('');self.$playPause.removeClass(self.opts.disabledClass);self=null;},onFinish:function() {var self=this;self.$wrap.find('div.summary-wrap').replaceWith('');self.pause.apply(self);self=null;},onSummaryInit:function() {var self=this;var $summary=self.$imagesList.filter('.' + self.opts.summaryFilter).parents('div.summary-wrap'),$lightbox_full=$('#lightbox-full'),$lightbox_nav=$('#lightbox-nav');hiddenClass=self.opts.hiddenClass;if($summary.length) {$lightbox_nav.show();var href=self.$imagesList.eq(0).attr('data-full');if(!href) { href=self.isPhotolist ? self.$galleryTitle.find('a').attr('href')||self.$imagesList.eq(0).attr('href'):$summary.find('.full').attr('href');}if(self.isPhotolist) {$lightbox_full.text('More photos');}if(href) {$lightbox_full.attr('href',href).removeClass(hiddenClass);}else { $lightbox_full.addClass(hiddenClass);}}else {$lightbox_full.addClass(hiddenClass);if(self.$imagesList.length<2) { $lightbox_nav.hide();}}$summary=null;$lightbox_full=null;$lightbox_nav=null;self=null;},onSummary:function(domImage) {var self=this.$document.data('active-self');var $parent=self.$img.parent();if(!$parent.find('div.summary-wrap').length) {$parent.append($(domImage).parents('div.summary-wrap').clone());var $summary=$parent.find('div.summary-wrap');var fw=self.opts.fallback.width;var fh=self.opts.fallback.height;self._setImageBoxSizes(fw,fh,function() {var w=fw - parseInt($summary.css('paddingLeft'),10);var h=fh - parseInt($summary.css('paddingTop'),10);$summary.css({ width:w,height:h});$summary=null;});}self.paused=true;self.$playPause.addClass('jlightbox-pause ' + self.opts.disabledClass).html('Play');self.pause.apply(self);self=null;$parent=null;}});var ajaxCfg=$.extend({},window.jcarouselCfg,{ajaxUrl:'/paralympics/torch-relay/torchbearers/_torchbearers.htmx?pageN=',itemFirstInCallback:function(carousel,li,index) {window.jcarouselCfg.itemFirstInCallback.apply(this,arguments);carousel.preloadPhoto();}});execIfExists($doc.getElementById('wrapTorchBearersList'),'jCarousel',ajaxCfg);},150);setTimeout(function(t) {clearTimeout(t);execIfExists($doc.getElementById('lcg-stickybar'),'stickyBar',{additionalElm:{ $footer:'#lcg-footer'},onFocusedClick:function(e,othis,mThis) {var $a=this.is('a') ? this:this.find('a:eq(0)');if(!$a.length) { return;}var label=$a.attr('class') + "-" + $a.attr("href").replace(new RegExp("/","g"),"");_gaq.push(['_trackEvent','sticky bar','click',label]);$a=null;},onAfterToggle:function(state,isOnLoad) {var $footer=this.opts.additionalElm.$footer;if(state==='is-open') {$footer.addClass('sticky-open').css('padding-bottom','');$($doc).bind('keyup',function(e) {if(e.keyCode===9) {var $target=$(e.target);if($target.closest('#sticky-content').length) {$target=null;return;}var stickyOffset=window.$sticky.offset(),targetOffset=$target.offset();if(targetOffset.top>=stickyOffset.top) {window.$scrollable.animate({ scrollTop:targetOffset.top - 200},400);}$target=null;}});}else {if(typeof ($footer)==typeof ([])) {$footer.removeClass('sticky-open');}$($doc).unbind('keyup');}$footer=null;},onResourcesLoaded:function() {execIfExists($doc.getElementById('sticky-myOly'),'myolympics');execIfExists('#schedule_gridWrap','mySchedule');setTimeout(function(t) {clearTimeout(t);execIfExists('.customTabs','myTabs');execIfExists('select[id$="filterSport"],select[id$="filterCountry"]','mySelect');},15);}},'$sticky');execIfExists('.search select:not(.noRedirect),.navigate-to select','changeRedirect');execIfExists('.ldn-popup','openPopupWindow');execIfExists('.buttonExpand>a','buttonExpander',{ elementToExpand:'.newsHiddenBody'});execIfExists('.fbog','fbog');window.$scrollable=$('body,html');},200);$('#atthevenuefilterLocation').ready(function() {if(location.hash=='#road-events') {$.ajax({type:"get",url:"/spectators/venues/library/location=4/_venueslist.html",success:function(result) {$("#atthevenuefilterLocation").val('4');$('#venuesList').replaceWith(result);},error:function() {}});}});function getInternetExplorerVersion() {var rv=-1;if(navigator.appName=='Microsoft Internet Explorer') {var ua=navigator.userAgent;var re=new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!=null) {rv=parseFloat(RegExp.$1);}}return rv;}window.$core=jQuery.extend({},window.$core,{fbog:function($) {$.elem={self:null,fbog:null,fbns:'locogapp',cookieName:'fbog',reminderCookieName:'fbogReminder',login:null,logout:null,name:null,userPic:null,ul:null,ulnoact:null,actBtn:null,actPan:null,actPanTimeout:null,actPanTimeoutValue:500,btnTurnReminder:null,actNote:null,actNoteTimeout:null,actNoteTimeoutValue:5000,actNoteReminder:null,alreadyCelebrated:null,btnSoc:null,btnOn:null,btnOff:null,btnTurn:null,btnTurnTimeout:null,btnTurnTimeoutValue:500,btnTurnRadio:null,btnTurnOn:null,btnTurnOff:null,loggedOut:null,loggenIn:null,opnBtn:null,optPan:null,optPanTimeout:null,optPanTimeoutValue:500,removeFb:null,fbogEventsB:null,celebrateBtn:null,fbogAthletesB:null,supportBtn:null};$.userinfo={appId:'',ogType:'',ogTitle:'',name:'',isAuthorized:false,userPicUrl:'',userId:null,OAuthAccessToken:null};$.post={id:null,url:null,isPosted:false,isCelebrated:false,interval:false,intervalValue:25000,lastUpdate:null,actionsArray:[],maxActivities:10};$.fn.fbog=function() {return $.fn.fbog.methods.init(this);};$.fn.fbog.methods={post:function(action) {if($.post.lastUpdate=null) {return;}else if(action=='celebrate'&&($.post.isCelebrated)) {if($.elem.alreadyCelebrated.hasClass('hide')) {$.elem.actNote.find('div').addClass('hide');$.elem.actNote.find('h4').addClass('hide');$.elem.actNote.css('margin-top','-75px');$.elem.actNote.find('.alreadycel-txt').removeClass('hide');}$.elem.self.addedActivity.apply();}else {if(localStorage.getItem($.elem.cookieName)!='off'&&!($.post.isPosted)) {var postUrl=$.post.url;switch ($.userinfo.ogType) {case ('article'):postUrl='/me/news.reads?article=' + postUrl;break;case ($.elem.fbns + ':result'):if(action=='celebrate') { postUrl='/me/' + $.elem.fbns + ':celebrate?result=' + postUrl;}else { postUrl='/me/' + $.elem.fbns + ':check?result=' + postUrl;}break;case ($.elem.fbns + ':photogallery'):postUrl='/me/' + $.elem.fbns + ':view?photogallery=' + postUrl;break;case ($.elem.fbns + ':athlete'):postUrl='/me/' + $.elem.fbns + ':support?athlete=' + postUrl;break;}if(postUrl.length>0) {FB.api(postUrl,'post',function(response) {if(!response||response.error) {return;}$.post.isPosted=true;$.post.id=response.id;$.elem.self.addedActivity.apply();delete response;});}}}},addedActivity:function() {setTimeout(function() { $.post.lastUpdate=null; $.elem.self.getLatestActions.apply();},1000);if(localStorage.getItem($.elem.reminderCookieName)=='on') {$.elem.actNote.find('.activity-post a').text($.userinfo.ogTitle);$.elem.actNote.find('div.close-tooltip').unbind('click').bind('click',function(e) {e.preventDefault();$.elem.actNote.fadeOut(150);});$.elem.actNote.find('span.js-og-remove').unbind('click').bind('click',function(e) {e.preventDefault();$.elem.actNote.fadeOut(150);$.elem.self.removeAction.apply($.elem.self,[response.id]);});$.elem.actNote.unbind('mouseenter').bind('mouseenter',function() {clearTimeout($.elem.actNoteTimeout);}).unbind('mouseleave').bind('mouseleave',function() {$.elem.actNoteTimeout=setTimeout(function() {$.elem.actNote.fadeOut(150);},$.elem.actNoteTimeoutValue);});$.elem.actNoteTimeout=setTimeout(function() {$.elem.actNote.fadeOut(150);},$.elem.actNoteTimeoutValue);$.elem.actNote.fadeIn(150);}},fbLogin:function(action) {FB.login(function(response) {if(!response.authResponse) {delete response;return;}FB.api('/me',function(response) {$.userinfo.name=response.name;$.userinfo.isAuthorized=true;$.userinfo.userPicUrl='http://graph.facebook.com/' + response.id + '/picture';$.elem.self.checkLoginStatus.apply($.elem.self,[action]);delete response;});},{ scope:'publish_actions'});},fbLogout:function() {FB.logout(function(response) {$.userinfo.isAuthorized=false;$.elem.loggenIn.hide();$.elem.loggedOut.fadeIn(150);$.elem.self.checkLoginStatus.apply();localStorage.setItem($.elem.cookieName,'on');localStorage.setItem($.elem.reminderCookieName,'on');delete response;});},checkLoginStatus:function(action) {FB.getLoginStatus(function(response) {if(response.status==='connected') {$.userinfo.userId=response.authResponse.userID;$.userinfo.OAuthAccessToken=response.authResponse.accessToken;$.userinfo.isAuthorized=true;FB.api('/me',function(response) {$.userinfo.name=response.name;$.elem.name.html($.userinfo.name);var fbImg=document.createElement('img');$.userinfo.userPicUrl='http://graph.facebook.com/' + response.id + '/picture';$($.elem.userPic).empty().append($(fbImg).attr('src',$.userinfo.userPicUrl));$.elem.self.switchSocial.apply($.elem.self,[localStorage.getItem($.elem.cookieName)]);$.elem.self.switchReminder.apply($.elem.self,[0]);if($.userinfo.ogType=='article') { $.elem.self.post.apply();}if(action=='celebrate'||action=='support') { $.elem.self.post.apply($.elem.self,[action]);}$.elem.self.getLatestActions.apply();$.elem.self.initTooltips.apply();$.elem.loggedOut.hide();$.elem.loggenIn.fadeIn(150);});}else if(response.status==='not_authorized') {$.elem.self.notLogged.apply();}else {$.elem.self.notLogged.apply();}delete response;});},notLogged:function() {$.userinfo.OAuthAccessToken='';$.userinfo.isAuthorized=false;$.elem.actNote.add($.elem.btnTurn).add($.elem.optPan).add($.elem.actPan).add($.elem.loggenIn).hide();$.elem.loggedOut.fadeIn(150);},switchSocial:function(status) {if(status==null) {status=$($.elem.btnTurn).find('input[name="soc"][checked="checked"]:radio').attr('value');}switch (status) {case 'on':$.elem.btnOff.hide();$.elem.btnOn.fadeIn(150);$.elem.btnTurnOff.attr('checked',false);$.elem.btnTurnOn.attr('checked',true);localStorage.setItem($.elem.cookieName,'on');break;case 'off':$.elem.btnOn.hide();$.elem.btnOff.fadeIn(150);$.elem.btnTurnOn.attr('checked',false);$.elem.btnTurnOff.attr('checked',true);localStorage.setItem($.elem.cookieName,'off');break;}},switchReminder:function(setta) {switch (localStorage.getItem($.elem.reminderCookieName)) {case 'on':$.elem.btnTurnReminder.attr('checked',true);$.elem.actNoteReminder.attr('checked',true);if(setta==1) {$.elem.btnTurnReminder.attr('checked',false);$.elem.actNoteReminder.attr('checked',false);localStorage.setItem($.elem.reminderCookieName,'off');}break;case 'off':$.elem.btnTurnReminder.attr('checked',false);$.elem.actNoteReminder.attr('checked',false);if(setta==1) {$.elem.btnTurnReminder.attr('checked',true);$.elem.actNoteReminder.attr('checked',true);localStorage.setItem($.elem.reminderCookieName,'on');}break;}},initTooltips:function() {$.elem.btnSoc.unbind('click').bind('click',function(e) {e.preventDefault();if($($.elem.btnTurn).is(":visible")) {$.elem.btnTurn.fadeOut(150);}else {$.elem.actNote.add($.elem.actPan).add($.elem.optPan).hide();$.elem.btnTurn.fadeIn(150);}return false;}).unbind('mouseenter').mouseenter(function() {clearTimeout($.elem.btnTurnTimeout);}).unbind('mouseleave').mouseleave(function() {$.elem.btnTurnTimeout=setTimeout(function() {$.elem.btnTurn.fadeOut(150);},$.elem.btnTurnTimeoutValue);});$.elem.btnTurn.unbind('mouseenter').mouseenter(function() {clearTimeout($.elem.btnTurnTimeout);$.elem.btnTurn.show();}).unbind('mouseleave').mouseleave(function() {$.elem.btnTurnTimeout=setTimeout(function() {$.elem.btnTurn.fadeOut(150);},$.elem.btnTurnTimeoutValue);});$.elem.actBtn.unbind('click').bind('click',function(e) {e.preventDefault();if($($.elem.actPan).is(":visible")) {$.elem.actPan.fadeOut(150);}else {$.elem.actNote.add($.elem.btnTurn).add($.elem.optPan).hide();$.elem.actPan.fadeIn(150);}return false;}).unbind('mouseenter').mouseenter(function() {clearTimeout($.elem.actPanTimeout);}).unbind('mouseleave').mouseleave(function() {$.elem.actPanTimeout=setTimeout(function() {$.elem.actPan.fadeOut(150);},$.elem.actPanTimeoutValue);});$.elem.actPan.unbind('mouseenter').mouseenter(function() {clearTimeout($.elem.actPanTimeout);$.elem.actPan.show();}).unbind('mouseleave').mouseleave(function() {$.elem.actPanTimeout=setTimeout(function() {$.elem.actPan.fadeOut(150);},$.elem.actPanTimeoutValue);});$.elem.opnBtn.unbind('click').bind('click',function(e) {e.preventDefault();if($($.elem.optPan).is(":visible")) {$.elem.optPan.fadeOut(150);}else {$.elem.actNote.add($.elem.btnTurn).add($.elem.actPan).hide();$.elem.optPan.fadeIn(150);}return false;}).unbind('mouseenter').mouseenter(function() {clearTimeout($.elem.optPanTimeout);}).unbind('mouseleave').mouseleave(function() {$.elem.optPanTimeout=setTimeout(function() {$.elem.optPan.fadeOut(150);},$.elem.optPanTimeoutValue);});$.elem.optPan.unbind('mouseenter').mouseenter(function() {clearTimeout($.elem.optPanTimeout);$.elem.optPan.show();}).unbind('mouseleave').mouseleave(function() {$.elem.optPanTimeout=setTimeout(function() {$.elem.optPan.fadeOut(150);},$.elem.optPanTimeoutValue);});$.elem.btnTurnRadio.unbind('change').change(function(e) {e.preventDefault();$.elem.self.switchSocial.apply();});$.elem.btnTurnReminder.unbind('click').bind('click',function() {$.elem.self.switchReminder.apply($.elem.self,[1]);});$.elem.actNoteReminder.unbind('click').bind('click',function() {$.elem.self.switchReminder.apply($.elem.self,[1]);});$.elem.removeFb.unbind('click').bind('click',function(e) {e.preventDefault();$.elem.self.remove.apply();});},getLatestActions:function() {if(!($.post.interval)) {setInterval(function() {$.elem.self.getLatestActions.apply();},$.post.intervalValue);$.post.interval=true;}var now=new Date();if(!$.post.lastUpdate||(now - $.post.lastUpdate)>($.post.intervalValue - 1)) {FB.api('/','POST',{batch:[{'method':'GET','relative_url':'me/news.reads'},{'method':'GET','relative_url':'me/' + $.elem.fbns + ':view'},{'method':'GET','relative_url':'me/' + $.elem.fbns + ':check'},{'method':'GET','relative_url':'me/' + $.elem.fbns + ':celebrate'},{'method':'GET','relative_url':'me/' + $.elem.fbns + ':support'}]},function(response) {if(!response||response.error) {delete response;return;}$.post.lastUpdate=new Date();$.elem.ul=$($.elem.fbog).find('#fbcp-act-pan .js-activity-ul');$.elem.ulnoact=$($.elem.fbog).find('#fbcp-act-pan .js-no-activity');$.elem.ul.empty();$.post.actionsArray=[];if(response[0]!==null) {$.elem.self.addActionToArray.apply($.elem.self,[response[0].body,'Read']);}if(response[1]!==null) {$.elem.self.addActionToArray.apply($.elem.self,[response[1].body,'View']);}if(response[2]!==null) {$.elem.self.addActionToArray.apply($.elem.self,[response[2].body,'Check']);}if(response[3]!==null) {$.elem.self.addActionToArray.apply($.elem.self,[response[3].body,'Celebrate']);}if(response[4]!==null) {$.elem.self.addActionToArray.apply($.elem.self,[response[4].body,'Support']);}$.post.actionsArray.sort(function(a,b) {if(a.date>b.date) { return -1;}if(a.date<b.date) { return 1;}return 0;});if($.post.actionsArray.length===0) {$.elem.ul.hide();$.elem.ulnoact.show();delete response;return;}$.elem.ul.show();$.elem.ulnoact.hide();var i=0,l=$.post.actionsArray.length,max=$.post.maxActivities,html=[];for (i; i<l&&i<max; i++) {html.push($.post.actionsArray[i].html);}$.elem.ul.append(html.join('')).find('.js-og-remove').unbind('click.fbog').bind('click.fbog',function(e) {e.preventDefault();var $actPan=$('#fbcp-act-pan'),$thisel=$(this),id=$thisel.parent().attr('data-id');$.elem.ul=$actPan.find('.js-activity-ul');$.elem.ulnoact=$actPan.find('.js-no-activity');$thisel.parent().remove();$.elem.self.removeAction.apply($.elem.self,[id]);if($.elem.ul.find('li').length===0) {$.elem.ul.hide();$.elem.ulnoact.show();}$actPan=null;$thisel=null;$.elem.ul=null;$.elem.ulnoact=null;});delete response;});}},removeAction:function(id) {var oldposted=$.post.isPosted;if($.post.id===id) {$.post.isPosted=false;}FB.api(id,'delete',function(response) {if(!response||response.error) {$.post.isPosted=oldposted;delete response;return;}$.post.lastUpdate=null;$.elem.self.getLatestActions.apply();delete response;});},addActionToArray:function(json,actionText) {var responseBody=JSON.parse(json);if(responseBody.error) {delete responseBody;return;}var i=0,l=responseBody.data.length;for (i; i<l; i++) {var action=responseBody.data[i],ogObject=null;switch (actionText) {case 'Read':ogObject=action.data.article;break;case 'View':ogObject=action.data.photogallery;break;case 'Check':ogObject=action.data.result;break;case 'Celebrate':ogObject=action.data.result;break;case 'Support':ogObject=action.data.athlete;break;}if(!ogObject) {return;}if(actionText=='Celebrate'&&!($.post.isCelebrated)) {if(escape(ogObject.url)==$.post.url) {$.post.isCelebrated=true;}}$.post.actionsArray.push({ date:action.publish_time,html:['<li data-id="',action.id,'"><span class="activity-post">',actionText,' ','<a href="',ogObject.url,'" target="_blank">',ogObject.title,'</a>',' ','on ',action.application.name,'&nbsp;<span class="time">(',$.elem.self.timeAgo.apply($.elem.self,[action.publish_time]),')</span></span><span class="js-og-remove">x</span></li>'].join('')});ogObject=null;}delete responseBody;},timeAgo:function(time) {var date=new Date((time).replace(/-/g,"/").replace(/[T]/g," ").replace("+0000","")),now=new Date(),diff=((now.getTime() + (now.getTimezoneOffset() * 60000) - date.getTime()) / 1000),day_diff=Math.floor(diff / 86400),out='';if(isNaN(day_diff)||day_diff<0) { return '';}if(diff<60) {out=Math.floor(diff) + ' secs ago';}else if(diff<120) {out='1 min ago';}else if(diff<3600) {out=Math.floor(diff / 60) + ' mins ago';}else if(diff<7200) {out='1 hr ago';}else if(diff<86400) {out=Math.floor(diff / 3600) + ' hrs ago';}else if(day_diff==1) {out='yesterday';}else if(day_diff<7) {out=day_diff + ' days ago';}else if(day_diff<31) {out=Math.ceil(day_diff / 7) + ' weeks ago';}else {out='more than 1 month ago';}date=null;return out;},remove:function() {FB.api('/me/permissions','delete',function(response) {$.elem.self.notLogged.apply();delete response;});},init:function($this) {$.elem.self=this;$.elem.fbog=$('.fbog');$.userinfo.appId=$('meta[property="fb:app_id"]').attr('content');$.userinfo.ogType=$('meta[property="og:type"]').attr('content');$.userinfo.ogTitle=$('meta[property="og:title"]').attr('content');if($.userinfo.appId.length>0&&$.userinfo.ogType.length>0&&$.userinfo.ogTitle.length>0&&window.localStorage) {$.elem.btnSoc=$.elem.fbog.find('.js-fbcp-social');$.elem.btnOn=$.elem.fbog.find('.js-fbcp-soc-btn-on');$.elem.btnOff=$.elem.fbog.find('.js-fbcp-soc-btn-off');$.elem.btnTurn=$.elem.fbog.find('.js-fbcp-soc-pan');$.elem.btnTurnReminder=$.elem.btnTurn.find('.js-fbcp-soc-rem input[type="checkbox"]');$.elem.btnTurnRadio=$.elem.btnTurn.find('input[name="soc"]:radio');$.elem.btnTurnOn=$.elem.btnTurn.find('input[name="soc"][value="on"]:radio');$.elem.btnTurnOff=$.elem.btnTurn.find('input[name="soc"][value="off"]:radio');$.elem.name=$.elem.fbog.find('.js-fbcp-header-name');$.elem.userPic=$.elem.fbog.find('.js-user-img');$.elem.loggedOut=$.elem.fbog.find('.js-fbcp-header-loggedout-auth');$.elem.loggenIn=$.elem.fbog.find('.js-fbcp-header-loggedin');$.elem.actBtn=$.elem.fbog.find('.js-fbcp-act-btn');$.elem.actPan=$.elem.fbog.find('.js-fbcp-act-pan');$.elem.actNote=$.elem.fbog.find('.js-act-note');$.elem.actNoteReminder=$.elem.actNote.find('.reminder input[type="checkbox"]');$.elem.opnBtn=$.elem.fbog.find('.js-fbcp-options');$.elem.optPan=$.elem.fbog.find('.js-fbcp-opt-pan');$.elem.removeFb=$.elem.optPan.find('.remove-fb a');if($('.fbogEventsB').length>0) {$.elem.fbogEventsB=$('.fbogEventsB');if($.elem.fbogEventsB.find('.js-act-note').length>0) {$.elem.actNote=$.elem.fbogEventsB.find('.js-act-note');$.elem.actNoteReminder=$.elem.fbogEventsB.find('.reminder input[type="checkbox"]');$.elem.alreadyCelebrated=$.elem.fbogEventsB.find('.alreadycel-txt');}$.elem.celebrateBtn=$.elem.fbogEventsB.find('.celebrate');}if($('.fbogAthletesB').length>0) {$.elem.fbogAthletesB=$('.fbogAthletesB');if($.elem.fbogAthletesB.find('.js-act-note').length>0) {$.elem.actNote=$.elem.fbogAthletesB.find('.js-act-note');$.elem.actNoteReminder=$.elem.fbogAthletesB.find('.reminder input[type="checkbox"]');}$.elem.supportBtn=$.elem.fbogAthletesB.find('.support');}window.fbAsyncInit=function() {FB.init({appId:$.userinfo.appId,cookie:true,status:true,xfbml:true,oauth:true});$.post.url=escape(window.location.protocol + '//' + (window.location.host||window.location.hostname) + window.location.pathname);if(localStorage.getItem($.elem.cookieName)==null) {localStorage.setItem($.elem.cookieName,'on');}if(localStorage.getItem($.elem.reminderCookieName)==null) {localStorage.setItem($.elem.reminderCookieName,'on');}if($.elem.celebrateBtn!=null) {$.elem.celebrateBtn.bind('click',function(e) {e.preventDefault();if(!$.userinfo.isAuthorized) { $.elem.self.fbLogin.apply($.elem.self,['celebrate']);}else { $.elem.self.post.apply($.elem.self,['celebrate']);}return false;});}if($.elem.supportBtn!=null) {$.elem.supportBtn.bind('click',function(e) {e.preventDefault();if(!$.userinfo.isAuthorized) { $.elem.self.fbLogin.apply($.elem.self,['support']);}else { $.elem.self.post.apply($.elem.self,['support']);}return false;});}$.elem.login=$.elem.fbog.find('a.login').bind('click',function(e) {e.preventDefault();$.elem.self.fbLogin.apply();});$.elem.logout=$.elem.fbog.find('a.button').bind('click',function(e) {e.preventDefault();$.elem.self.fbLogout.apply();});$.elem.self.checkLoginStatus.apply();};}}}}});
